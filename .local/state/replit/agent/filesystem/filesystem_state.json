{"file_contents":{"reports/models.py":{"content":"from django.db import models\n\n# Create your models here.\n","size_bytes":57},"communications/models.py":{"content":"from django.db import models\nfrom django.conf import settings\n\nclass Announcement(models.Model):\n    PRIORITY_CHOICES = (\n        ('low', 'Low'),\n        ('normal', 'Normal'),\n        ('high', 'High'),\n        ('urgent', 'Urgent'),\n    )\n    \n    title = models.CharField(max_length=200)\n    message = models.TextField()\n    priority = models.CharField(max_length=10, choices=PRIORITY_CHOICES, default='normal')\n    created_by = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE, related_name='announcements')\n    target_roles = models.CharField(max_length=200, blank=True, help_text='Comma-separated roles: administrator,priest,coordinator,volunteer')\n    target_ministries = models.ManyToManyField('ministries.Ministry', blank=True, related_name='announcements')\n    is_active = models.BooleanField(default=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n    expires_at = models.DateTimeField(null=True, blank=True)\n    \n    class Meta:\n        ordering = ['-created_at']\n    \n    def __str__(self):\n        return f\"{self.title} ({self.get_priority_display()})\"\n\nclass EmailLog(models.Model):\n    subject = models.CharField(max_length=300)\n    recipients = models.TextField(help_text='Comma-separated email addresses')\n    body = models.TextField()\n    sent_by = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.SET_NULL, null=True, related_name='sent_emails')\n    sent_at = models.DateTimeField(auto_now_add=True)\n    success = models.BooleanField(default=True)\n    error_message = models.TextField(blank=True)\n    \n    class Meta:\n        ordering = ['-sent_at']\n    \n    def __str__(self):\n        return f\"{self.subject} - {self.sent_at.date()}\"\n","size_bytes":1699},"events/migrations/0001_initial.py":{"content":"# Generated by Django 5.2.8 on 2025-11-19 08:54\n\nimport django.db.models.deletion\nfrom django.conf import settings\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    initial = True\n\n    dependencies = [\n        ('ministries', '0001_initial'),\n        ('volunteers', '0001_initial'),\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='Event',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('title', models.CharField(max_length=200)),\n                ('description', models.TextField()),\n                ('event_type', models.CharField(choices=[('mass', 'Mass'), ('meeting', 'Meeting'), ('outreach', 'Outreach Program'), ('fundraiser', 'Fundraiser'), ('celebration', 'Celebration'), ('other', 'Other')], default='other', max_length=20)),\n                ('start_datetime', models.DateTimeField()),\n                ('end_datetime', models.DateTimeField()),\n                ('location', models.CharField(max_length=300)),\n                ('max_volunteers', models.PositiveIntegerField(blank=True, null=True)),\n                ('is_active', models.BooleanField(default=True)),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('updated_at', models.DateTimeField(auto_now=True)),\n                ('assigned_volunteers', models.ManyToManyField(blank=True, related_name='assigned_events', to='volunteers.volunteer')),\n                ('coordinator', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='coordinated_events', to=settings.AUTH_USER_MODEL)),\n                ('ministry', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='events', to='ministries.ministry')),\n            ],\n            options={\n                'ordering': ['-start_datetime'],\n            },\n        ),\n    ]\n","size_bytes":2045},"ccvms/__init__.py":{"content":"","size_bytes":0},"volunteers/migrations/__init__.py":{"content":"","size_bytes":0},"volunteers/urls.py":{"content":"from django.urls import path\nfrom . import views\n\napp_name = 'volunteers'\n\nurlpatterns = [\n    path('', views.VolunteerListView.as_view(), name='list'),\n    path('create/', views.VolunteerCreateView.as_view(), name='create'),\n    path('<int:pk>/', views.VolunteerDetailView.as_view(), name='detail'),\n    path('<int:pk>/edit/', views.VolunteerUpdateView.as_view(), name='edit'),\n    path('<int:pk>/delete/', views.VolunteerDeleteView.as_view(), name='delete'),\n    path('<int:pk>/approve/', views.VolunteerApproveView.as_view(), name='approve'),\n    path('<int:pk>/reject/', views.VolunteerRejectView.as_view(), name='reject'),\n]\n","size_bytes":630},"accounts/models.py":{"content":"from django.contrib.auth.models import AbstractUser\nfrom django.db import models\n\nclass User(AbstractUser):\n    ROLE_CHOICES = (\n        ('administrator', 'Administrator'),\n        ('priest', 'Priest'),\n        ('coordinator', 'Coordinator'),\n        ('volunteer', 'Volunteer'),\n    )\n    \n    APPROVAL_STATUS_CHOICES = (\n        ('pending', 'Pending Approval'),\n        ('approved', 'Approved'),\n        ('rejected', 'Rejected'),\n    )\n    \n    role = models.CharField(max_length=20, choices=ROLE_CHOICES, default='volunteer')\n    approval_status = models.CharField(max_length=20, choices=APPROVAL_STATUS_CHOICES, default='approved')\n    phone = models.CharField(max_length=20, blank=True)\n    profile_picture = models.ImageField(upload_to='profiles/', blank=True, null=True)\n    assigned_ministry = models.ForeignKey('ministries.Ministry', on_delete=models.SET_NULL, null=True, blank=True, related_name='assigned_staff', help_text='Ministry assigned to Priest or Coordinator')\n    created_at = models.DateTimeField(auto_now_add=True)\n    updated_at = models.DateTimeField(auto_now=True)\n    is_suspended = models.BooleanField(default=False, help_text='Suspended users cannot log in')\n    \n    def __str__(self):\n        return f\"{self.get_full_name() or self.username} ({self.get_role_display()})\"\n    \n    def is_administrator(self):\n        return self.role == 'administrator'\n    \n    def is_priest(self):\n        return self.role == 'priest'\n    \n    def is_coordinator(self):\n        return self.role == 'coordinator'\n    \n    def is_volunteer_user(self):\n        return self.role == 'volunteer'\n    \n    def can_manage_volunteers(self):\n        return self.role in ['administrator', 'coordinator', 'priest']\n    \n    def can_manage_all_users(self):\n        return self.role == 'administrator'\n    \n    def can_assign_roles(self):\n        return self.role in ['administrator', 'priest']\n    \n    def can_approve_volunteers(self):\n        return self.role in ['administrator', 'priest']\n    \n    def can_schedule_events(self):\n        return self.role in ['administrator', 'priest', 'coordinator']\n    \n    def can_assign_volunteers_to_events(self):\n        return self.role in ['administrator', 'priest', 'coordinator']\n    \n    def can_track_attendance(self):\n        return self.role in ['administrator', 'priest', 'coordinator']\n    \n    def can_send_communications(self):\n        return self.role in ['administrator', 'priest', 'coordinator']\n    \n    def can_view_reports(self):\n        return self.role in ['administrator', 'priest', 'coordinator']\n    \n    def can_export_reports(self):\n        return self.role in ['administrator', 'priest']\n    \n    def can_view_audit_logs(self):\n        return self.role == 'administrator'\n    \n    def can_manage_ministries(self):\n        return self.role == 'administrator'\n    \n    def can_assign_priests(self):\n        return self.role == 'administrator'\n    \n    def can_make_coordinator(self):\n        return self.role in ['administrator', 'priest']\n    \n    def can_provide_feedback(self):\n        return self.role in ['administrator', 'priest', 'coordinator']\n    \n    def get_managed_ministry(self):\n        if self.is_priest() or self.is_coordinator():\n            return self.assigned_ministry\n        return None\n    \n    def get_ministry_volunteers(self):\n        ministry = self.get_managed_ministry()\n        if ministry:\n            return ministry.volunteers.all()\n        return None\n    \n    def is_approved(self):\n        return self.approval_status == 'approved'\n    \n    def is_pending_approval(self):\n        return self.approval_status == 'pending'\n    \n    def can_login(self):\n        return self.is_active and not self.is_suspended and self.is_approved()\n","size_bytes":3733},"attendance/views.py":{"content":"from django.views.generic import ListView, CreateView, UpdateView, DeleteView, TemplateView\nfrom django.contrib.auth.mixins import LoginRequiredMixin, UserPassesTestMixin\nfrom django.shortcuts import render, redirect, get_object_or_404\nfrom django.contrib import messages\nfrom django.urls import reverse_lazy\nfrom django.db.models import Count, Q\nfrom .models import Attendance\nfrom .forms import AttendanceForm, BulkAttendanceForm\nfrom events.models import Event\nfrom volunteers.models import Volunteer\n\n\nclass AttendanceListView(LoginRequiredMixin, UserPassesTestMixin, ListView):\n    model = Attendance\n    template_name = 'attendance/list.html'\n    context_object_name = 'attendance_records'\n    paginate_by = 20\n    \n    def test_func(self):\n        return self.request.user.can_track_attendance()\n    \n    def get_queryset(self):\n        queryset = super().get_queryset()\n        event_id = self.request.GET.get('event')\n        status = self.request.GET.get('status')\n        \n        if event_id:\n            queryset = queryset.filter(event_id=event_id)\n        if status:\n            queryset = queryset.filter(status=status)\n        \n        user = self.request.user\n        if user.is_coordinator():\n            ministry = user.get_managed_ministry()\n            if ministry:\n                queryset = queryset.filter(event__ministry=ministry)\n        elif user.is_priest():\n            ministry = user.get_managed_ministry()\n            if ministry:\n                queryset = queryset.filter(event__ministry=ministry)\n        \n        return queryset\n\n\nclass AttendanceCreateView(LoginRequiredMixin, UserPassesTestMixin, CreateView):\n    model = Attendance\n    form_class = AttendanceForm\n    template_name = 'attendance/form.html'\n    success_url = reverse_lazy('attendance:list')\n    \n    def test_func(self):\n        return self.request.user.can_track_attendance()\n    \n    def get_form(self, form_class=None):\n        form = super().get_form(form_class)\n        user = self.request.user\n        \n        if user.is_coordinator() or user.is_priest():\n            ministry = user.get_managed_ministry()\n            if ministry:\n                form.fields['event'].queryset = Event.objects.filter(ministry=ministry, is_active=True)\n                form.fields['volunteer'].queryset = Volunteer.objects.filter(ministries=ministry, is_active=True)\n            else:\n                form.fields['event'].queryset = Event.objects.none()\n                form.fields['volunteer'].queryset = Volunteer.objects.none()\n        \n        return form\n    \n    def form_valid(self, form):\n        user = self.request.user\n        event = form.cleaned_data['event']\n        volunteer = form.cleaned_data['volunteer']\n        \n        if user.is_coordinator() or user.is_priest():\n            ministry = user.get_managed_ministry()\n            if not ministry or event.ministry != ministry:\n                messages.error(self.request, 'You can only mark attendance for events in your ministry.')\n                return self.form_invalid(form)\n            \n            if not volunteer.ministries.filter(id=ministry.id).exists():\n                messages.error(self.request, 'You can only mark attendance for volunteers in your ministry.')\n                return self.form_invalid(form)\n        \n        if not event.assigned_volunteers.filter(id=volunteer.id).exists():\n            messages.error(self.request, 'The volunteer must be assigned to this event.')\n            return self.form_invalid(form)\n        \n        form.instance.marked_by = self.request.user\n        messages.success(self.request, 'Attendance recorded successfully.')\n        return super().form_valid(form)\n\n\nclass AttendanceUpdateView(LoginRequiredMixin, UserPassesTestMixin, UpdateView):\n    model = Attendance\n    form_class = AttendanceForm\n    template_name = 'attendance/form.html'\n    success_url = reverse_lazy('attendance:list')\n    \n    def test_func(self):\n        user = self.request.user\n        attendance = self.get_object()\n        \n        if not user.can_track_attendance():\n            return False\n        \n        if user.is_administrator():\n            return True\n        \n        if user.is_coordinator() or user.is_priest():\n            ministry = user.get_managed_ministry()\n            if ministry and attendance.event.ministry == ministry:\n                return True\n        \n        return False\n    \n    def form_valid(self, form):\n        messages.success(self.request, 'Attendance updated successfully.')\n        return super().form_valid(form)\n\n\nclass AttendanceDeleteView(LoginRequiredMixin, UserPassesTestMixin, DeleteView):\n    model = Attendance\n    template_name = 'attendance/confirm_delete.html'\n    success_url = reverse_lazy('attendance:list')\n    \n    def test_func(self):\n        user = self.request.user\n        attendance = self.get_object()\n        \n        if not user.can_track_attendance():\n            return False\n        \n        if user.is_administrator():\n            return True\n        \n        if user.is_coordinator() or user.is_priest():\n            ministry = user.get_managed_ministry()\n            if ministry and attendance.event.ministry == ministry:\n                return True\n        \n        return False\n\n\nclass BulkAttendanceView(LoginRequiredMixin, UserPassesTestMixin, TemplateView):\n    template_name = 'attendance/bulk_mark.html'\n    \n    def test_func(self):\n        return self.request.user.can_track_attendance()\n    \n    def _can_access_event(self, event):\n        user = self.request.user\n        if user.is_administrator():\n            return True\n        \n        if user.is_priest() or user.is_coordinator():\n            ministry = user.get_managed_ministry()\n            if ministry and event.ministry == ministry:\n                return True\n        \n        return False\n    \n    def get_context_data(self, **kwargs):\n        context = super().get_context_data(**kwargs)\n        event_id = self.request.GET.get('event')\n        user = self.request.user\n        \n        if event_id:\n            event = get_object_or_404(Event, id=event_id)\n            \n            if not self._can_access_event(event):\n                messages.error(self.request, 'You do not have permission to mark attendance for this event.')\n                context['events'] = self._get_allowed_events()\n                return context\n            \n            context['event'] = event\n            context['volunteers'] = event.assigned_volunteers.all()\n            context['attendance_records'] = {\n                record.volunteer_id: record \n                for record in Attendance.objects.filter(event=event)\n            }\n        \n        context['events'] = self._get_allowed_events()\n        return context\n    \n    def _get_allowed_events(self):\n        user = self.request.user\n        queryset = Event.objects.filter(is_active=True)\n        \n        if user.is_coordinator() or user.is_priest():\n            ministry = user.get_managed_ministry()\n            if ministry:\n                queryset = queryset.filter(ministry=ministry)\n            else:\n                queryset = queryset.none()\n        \n        return queryset.order_by('-start_datetime')[:20]\n    \n    def post(self, request, *args, **kwargs):\n        event_id = request.POST.get('event_id')\n        event = get_object_or_404(Event, id=event_id)\n        \n        if not self._can_access_event(event):\n            messages.error(request, 'You do not have permission to mark attendance for this event.')\n            return redirect('attendance:bulk_mark')\n        \n        updated_count = 0\n        for volunteer in event.assigned_volunteers.all():\n            status = request.POST.get(f'status_{volunteer.id}')\n            notes = request.POST.get(f'notes_{volunteer.id}', '')\n            \n            if status:\n                Attendance.objects.update_or_create(\n                    event=event,\n                    volunteer=volunteer,\n                    defaults={\n                        'status': status,\n                        'notes': notes,\n                        'marked_by': request.user\n                    }\n                )\n                updated_count += 1\n        \n        messages.success(request, f'Attendance marked for {updated_count} volunteers.')\n        return redirect('attendance:bulk_mark')\n","size_bytes":8337},"manage.py":{"content":"#!/usr/bin/env python\n\"\"\"Django's command-line utility for administrative tasks.\"\"\"\nimport os\nimport sys\n\n\ndef main():\n    \"\"\"Run administrative tasks.\"\"\"\n    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'ccvms.settings')\n    try:\n        from django.core.management import execute_from_command_line\n    except ImportError as exc:\n        raise ImportError(\n            \"Couldn't import Django. Are you sure it's installed and \"\n            \"available on your PYTHONPATH environment variable? Did you \"\n            \"forget to activate a virtual environment?\"\n        ) from exc\n    execute_from_command_line(sys.argv)\n\n\nif __name__ == '__main__':\n    main()\n","size_bytes":661},"ministries/tests.py":{"content":"from django.test import TestCase\n\n# Create your tests here.\n","size_bytes":60},"events/models.py":{"content":"from django.db import models\nfrom django.conf import settings\n\n\nclass Event(models.Model):\n    EVENT_TYPE_CHOICES = (\n        ('mass', 'Mass'),\n        ('meeting', 'Meeting'),\n        ('outreach', 'Outreach Program'),\n        ('fundraiser', 'Fundraiser'),\n        ('celebration', 'Celebration'),\n        ('other', 'Other'),\n    )\n    \n    title = models.CharField(max_length=200)\n    description = models.TextField()\n    event_type = models.CharField(max_length=20, choices=EVENT_TYPE_CHOICES, default='other')\n    ministry = models.ForeignKey('ministries.Ministry', on_delete=models.SET_NULL, null=True, blank=True, related_name='events')\n    start_datetime = models.DateTimeField()\n    end_datetime = models.DateTimeField()\n    location = models.CharField(max_length=300)\n    coordinator = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.SET_NULL, null=True, related_name='coordinated_events')\n    assigned_volunteers = models.ManyToManyField('volunteers.Volunteer', related_name='assigned_events', blank=True)\n    max_volunteers = models.PositiveIntegerField(null=True, blank=True)\n    is_active = models.BooleanField(default=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n    updated_at = models.DateTimeField(auto_now=True)\n    \n    class Meta:\n        ordering = ['-start_datetime']\n    \n    def __str__(self):\n        return f\"{self.title} - {self.start_datetime.date()}\"\n    \n    def volunteer_count(self):\n        return self.assigned_volunteers.count()\n\n\nclass Task(models.Model):\n    STATUS_CHOICES = (\n        ('pending', 'Pending'),\n        ('in_progress', 'In Progress'),\n        ('completed', 'Completed'),\n        ('cancelled', 'Cancelled'),\n    )\n    \n    event = models.ForeignKey(Event, on_delete=models.CASCADE, related_name='tasks')\n    title = models.CharField(max_length=200)\n    description = models.TextField()\n    assigned_to = models.ForeignKey('volunteers.Volunteer', on_delete=models.CASCADE, related_name='assigned_tasks')\n    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='pending')\n    due_date = models.DateField(null=True, blank=True)\n    assigned_by = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.SET_NULL, null=True, related_name='tasks_assigned')\n    created_at = models.DateTimeField(auto_now_add=True)\n    updated_at = models.DateTimeField(auto_now=True)\n    \n    class Meta:\n        ordering = ['-created_at']\n    \n    def __str__(self):\n        return f\"{self.title} - {self.assigned_to.user.get_full_name()}\"\n\n\nclass EventReport(models.Model):\n    STATUS_CHOICES = (\n        ('draft', 'Draft'),\n        ('submitted', 'Submitted'),\n        ('reviewed', 'Reviewed'),\n    )\n    \n    event = models.ForeignKey(Event, on_delete=models.CASCADE, related_name='reports')\n    submitted_by = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE, related_name='submitted_reports')\n    title = models.CharField(max_length=200)\n    summary = models.TextField(help_text=\"Brief summary of the event\")\n    attendance_count = models.PositiveIntegerField(help_text=\"Number of attendees\")\n    volunteer_performance = models.TextField(help_text=\"Notes on volunteer performance\")\n    challenges = models.TextField(blank=True, help_text=\"Challenges encountered during the event\")\n    recommendations = models.TextField(blank=True, help_text=\"Recommendations for future events\")\n    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='draft')\n    submitted_at = models.DateTimeField(null=True, blank=True)\n    reviewed_by = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.SET_NULL, null=True, blank=True, related_name='reviewed_reports')\n    reviewed_at = models.DateTimeField(null=True, blank=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n    updated_at = models.DateTimeField(auto_now=True)\n    \n    class Meta:\n        ordering = ['-created_at']\n    \n    def __str__(self):\n        return f\"Report: {self.event.title} by {self.submitted_by.get_full_name()}\"\n","size_bytes":4020},"feedback/models.py":{"content":"from django.db import models\nfrom django.conf import settings\n\nclass VolunteerEvaluation(models.Model):\n    RATING_CHOICES = (\n        (1, 'Poor'),\n        (2, 'Below Average'),\n        (3, 'Average'),\n        (4, 'Good'),\n        (5, 'Excellent'),\n    )\n    \n    volunteer = models.ForeignKey('volunteers.Volunteer', on_delete=models.CASCADE, related_name='evaluations')\n    event = models.ForeignKey('events.Event', on_delete=models.SET_NULL, null=True, blank=True, related_name='evaluations')\n    evaluated_by = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE, related_name='given_evaluations')\n    rating = models.IntegerField(choices=RATING_CHOICES)\n    comments = models.TextField()\n    created_at = models.DateTimeField(auto_now_add=True)\n    \n    class Meta:\n        ordering = ['-created_at']\n    \n    def __str__(self):\n        return f\"Evaluation for {self.volunteer} - Rating: {self.rating}/5\"\n\nclass EventFeedback(models.Model):\n    event = models.ForeignKey('events.Event', on_delete=models.CASCADE, related_name='feedback')\n    volunteer = models.ForeignKey('volunteers.Volunteer', on_delete=models.CASCADE, related_name='event_feedback')\n    feedback = models.TextField()\n    suggestions = models.TextField(blank=True)\n    would_participate_again = models.BooleanField(default=True)\n    submitted_at = models.DateTimeField(auto_now_add=True)\n    \n    class Meta:\n        unique_together = ('event', 'volunteer')\n        ordering = ['-submitted_at']\n    \n    def __str__(self):\n        return f\"Feedback for {self.event.title} by {self.volunteer}\"\n","size_bytes":1584},"ministries/migrations/__init__.py":{"content":"","size_bytes":0},"ministries/admin.py":{"content":"from django.contrib import admin\nfrom .models import Ministry, Program\n\n@admin.register(Ministry)\nclass MinistryAdmin(admin.ModelAdmin):\n    list_display = ['name', 'leader', 'volunteer_count', 'is_active', 'created_at']\n    list_filter = ['is_active', 'created_at']\n    search_fields = ['name', 'description']\n\n@admin.register(Program)\nclass ProgramAdmin(admin.ModelAdmin):\n    list_display = ['name', 'ministry', 'start_date', 'end_date', 'coordinator', 'is_active']\n    list_filter = ['is_active', 'ministry', 'start_date']\n    search_fields = ['name', 'description']\n","size_bytes":571},"communications/views.py":{"content":"from django.views.generic import ListView, CreateView, UpdateView, DeleteView, DetailView\nfrom django.contrib.auth.mixins import LoginRequiredMixin, UserPassesTestMixin\nfrom django.urls import reverse_lazy\nfrom .models import Announcement, EmailLog\nfrom .forms import AnnouncementForm\n\nclass AnnouncementListView(LoginRequiredMixin, ListView):\n    model = Announcement\n    template_name = 'communications/list.html'\n    context_object_name = 'announcements'\n    paginate_by = 20\n\nclass AnnouncementDetailView(LoginRequiredMixin, DetailView):\n    model = Announcement\n    template_name = 'communications/detail.html'\n    context_object_name = 'announcement'\n\nclass AnnouncementCreateView(LoginRequiredMixin, UserPassesTestMixin, CreateView):\n    model = Announcement\n    form_class = AnnouncementForm\n    template_name = 'communications/form.html'\n    success_url = reverse_lazy('communications:list')\n    \n    def test_func(self):\n        return self.request.user.can_manage_volunteers()\n    \n    def form_valid(self, form):\n        form.instance.created_by = self.request.user\n        return super().form_valid(form)\n\nclass AnnouncementUpdateView(LoginRequiredMixin, UserPassesTestMixin, UpdateView):\n    model = Announcement\n    form_class = AnnouncementForm\n    template_name = 'communications/form.html'\n    success_url = reverse_lazy('communications:list')\n    \n    def test_func(self):\n        return self.request.user.can_manage_volunteers()\n\nclass AnnouncementDeleteView(LoginRequiredMixin, UserPassesTestMixin, DeleteView):\n    model = Announcement\n    template_name = 'communications/confirm_delete.html'\n    success_url = reverse_lazy('communications:list')\n    \n    def test_func(self):\n        return self.request.user.can_manage_volunteers()\n","size_bytes":1756},"feedback/urls.py":{"content":"from django.urls import path\nfrom . import views\n\napp_name = 'feedback'\n\nurlpatterns = [\n    path('', views.FeedbackListView.as_view(), name='list'),\n    path('evaluation/create/', views.EvaluationCreateView.as_view(), name='evaluation_create'),\n    path('evaluation/<int:pk>/edit/', views.EvaluationUpdateView.as_view(), name='evaluation_edit'),\n    path('evaluation/<int:pk>/delete/', views.EvaluationDeleteView.as_view(), name='evaluation_delete'),\n    path('event-feedback/', views.EventFeedbackListView.as_view(), name='event_feedback_list'),\n    path('event-feedback/create/', views.EventFeedbackCreateView.as_view(), name='event_feedback_create'),\n]\n","size_bytes":657},"events/admin.py":{"content":"from django.contrib import admin\nfrom .models import Event, Task, EventReport\n\n\n@admin.register(Event)\nclass EventAdmin(admin.ModelAdmin):\n    list_display = ['title', 'event_type', 'ministry', 'start_datetime', 'location', 'volunteer_count', 'is_active']\n    list_filter = ['event_type', 'is_active', 'start_datetime', 'ministry']\n    search_fields = ['title', 'description', 'location']\n    filter_horizontal = ['assigned_volunteers']\n\n\n@admin.register(Task)\nclass TaskAdmin(admin.ModelAdmin):\n    list_display = ['title', 'event', 'assigned_to', 'status', 'due_date', 'assigned_by', 'created_at']\n    list_filter = ['status', 'due_date', 'created_at']\n    search_fields = ['title', 'description', 'event__title', 'assigned_to__user__first_name', 'assigned_to__user__last_name']\n    \n\n@admin.register(EventReport)\nclass EventReportAdmin(admin.ModelAdmin):\n    list_display = ['title', 'event', 'submitted_by', 'status', 'attendance_count', 'submitted_at']\n    list_filter = ['status', 'submitted_at', 'created_at']\n    search_fields = ['title', 'summary', 'event__title', 'submitted_by__first_name', 'submitted_by__last_name']\n","size_bytes":1129},"accounts/urls.py":{"content":"from django.urls import path\nfrom django.contrib.auth import views as auth_views\nfrom . import views\n\napp_name = 'accounts'\n\nurlpatterns = [\n    path('login/', auth_views.LoginView.as_view(template_name='accounts/login.html'), name='login'),\n    path('logout/', auth_views.LogoutView.as_view(), name='logout'),\n    path('signup/', views.volunteer_signup, name='signup'),\n    path('users/', views.UserListView.as_view(), name='user_list'),\n    path('users/create/', views.UserCreateView.as_view(), name='user_create'),\n    path('users/<int:pk>/edit/', views.UserUpdateView.as_view(), name='user_edit'),\n    path('users/<int:pk>/delete/', views.UserDeleteView.as_view(), name='user_delete'),\n    path('users/<int:pk>/suspend/', views.UserSuspendView.as_view(), name='user_suspend'),\n    path('users/<int:pk>/assign-role/', views.AssignRoleView.as_view(), name='assign_role'),\n    path('users/<int:pk>/assign-ministry/', views.AssignMinistryView.as_view(), name='assign_ministry'),\n]\n","size_bytes":981},"replit.md":{"content":"# Catholic Church Volunteer Management System (CCVMS)\n\n## Project Overview\nA comprehensive Django-based volunteer management system for Catholic parishes, built with Python, Django, and TailwindCSS.\n\n## Current Status\n**Status**: MVP Complete with Enhanced Volunteer Management  \n**Server**: Django development server running on port 5000  \n**Database**: SQLite with all migrations applied  \n**Workflow**: Configured and running successfully  \n**Latest Update**: Added ministry assignment and priest-controlled event management (Nov 23, 2025)  \n\n## Architecture\n\n### Django Apps\n1. **accounts** - Custom User model with role-based access (Administrator, Priest, Coordinator, Volunteer)\n2. **volunteers** - Full CRUD for volunteer management with search\n3. **ministries** - Ministry and program management\n4. **events** - Event scheduling with volunteer assignments\n5. **attendance** - Attendance tracking and performance monitoring\n6. **communications** - Announcements and email notifications\n7. **reports** - Analytics dashboard with statistics\n8. **feedback** - Volunteer evaluations and event feedback\n\n### Technology Stack\n- **Backend**: Django 5.2.8, Python 3.11\n- **Frontend**: HTML5, TailwindCSS (CDN), Vanilla JavaScript\n- **Database**: SQLite (development)\n- **Authentication**: Django built-in auth with custom User model\n\n## Features Implemented\n\n### Core Functionality\n✅ Custom User model with 4 role types  \n✅ **Volunteer Self-Registration** - Public signup form at `/accounts/signup/` with document upload  \n✅ **Supporting Document Upload** - Volunteers can upload resume/ID during signup  \n✅ **Pending Approval System** - New volunteer accounts require admin/coordinator approval before login  \n✅ **Role-Based Navigation Menu** - Menu items displayed based on user role (Volunteer, Coordinator, Priest, Administrator)  \n✅ **Volunteer Approval Management** - Approve/reject pending volunteers from list or detail view  \n✅ **Role-Based Dashboards** - Separate dashboards for Admin, Priest, Coordinator, Volunteer  \n✅ Full CRUD operations for volunteers, ministries, events  \n✅ Role-based access control with permission checks  \n✅ Admin panel for all models with customized displays  \n✅ Responsive TailwindCSS UI with dashboard  \n✅ Login/logout functionality  \n✅ Search and filtering capabilities  \n✅ Database relationships (ManyToMany, ForeignKey)  \n\n### Security & Access\n✅ LoginRequiredMixin on all views  \n✅ UserPassesTestMixin for role-based permissions  \n✅ CSRF protection with Replit trusted origins  \n✅ Session-based authentication  \n✅ Automatic user+profile creation in transaction (signup)  \n✅ Pending account activation - new volunteers cannot login until approved  \n✅ Role-based menu visibility - users only see authorized sections  \n\n## Known Limitations & Future Improvements\n\n### Recent Additions\n\n**Nov 23, 2025 - Ministry Assignment & Priest Event Control**\n✅ **Ministry Assignment UI** - Administrators can assign users to ministries directly from user management page\n✅ **Priest-Only Event Creation** - Only priests (not admins) can create events\n✅ **Auto-Ministry Assignment** - Events automatically assigned to priest's ministry\n✅ **Filtered Volunteer Selection** - Priests can only assign volunteers and coordinators from their ministry to events\n✅ **Ministry-Based Access Control** - Priests can only edit/delete events for their assigned ministry\n\n**Nov 20, 2025 - Enhanced Volunteer Management**\n✅ **Supporting Document Upload** - Volunteers can upload documents (resume, ID) during signup  \n✅ **Pending Approval System** - New volunteer accounts set to pending/inactive until approved by admin/coordinator  \n✅ **Approval Workflow** - Approve/reject volunteers directly from volunteer list or detail view  \n✅ **Document Review** - Admins/coordinators can view uploaded documents before approving  \n✅ **Role-Based Menu** - Navigation dynamically adjusts based on user role:\n   - **Volunteers**: Dashboard, Events, Feedback only\n   - **Coordinators**: Dashboard, Volunteers, Ministries, Events, Attendance, Communications\n   - **Priests**: Dashboard, Ministries, Events, Reports, Feedback\n   - **Administrators**: All sections including Admin panel\n\n**Nov 19, 2025 - Role-Based Dashboards**\n✅ **Public Volunteer Signup** - Complete registration form with user account and volunteer profile\n✅ **Administrator Dashboard** - Full management access with system status\n✅ **Priest Dashboard** - Parish overview, reports, and announcements\n✅ **Coordinator Dashboard** - Volunteer/event management with quick actions\n✅ **Volunteer Dashboard** - Personal events, ministries, and announcements\n\n### Priority Items for Future Development\n1. **CRUD Coverage** - Attendance and Feedback modules need full CRUD views (currently list-only).\n2. **Enhanced Analytics** - Reports module shows counts; needs deeper analytics (participation rates, demographics breakdowns).\n3. **Templates** - Need form/detail/delete templates for attendance and feedback modules.\n4. **Email Notifications** - Implement actual email sending for event reminders\n\n### Enhancements\n- Email backend configuration for production\n- CSV/PDF export for reports\n- Advanced filtering and search\n- Volunteer recognition system with badges\n- Calendar view for events\n- SMS notifications (optional)\n\n## Quick Start\n\n### First Time Setup\n```bash\n# Install dependencies\npip install django pillow\n\n# Run migrations (already done)\npython manage.py migrate\n\n# Create superuser\npython manage.py createsuperuser\n\n# Run server\npython manage.py runserver 0.0.0.0:5000\n```\n\n### Access Points\n- **Main Dashboard**: http://localhost:5000/\n- **Admin Panel**: http://localhost:5000/admin/\n- **Login**: http://localhost:5000/accounts/login/\n\n### Default Roles\n- **Administrator**: Full system access including volunteer approval, ministry assignment, all menu items visible\n- **Priest**: Exclusive event creation/management for assigned ministry, view reports, access to events and feedback\n- **Coordinator**: Manage volunteers (including approval), events, attendance, communications (within assigned ministry)\n- **Volunteer**: View assigned events and feedback only (limited menu access)\n\n## File Structure\n```\nccvms/\n├── accounts/          # Authentication & user management\n├── volunteers/        # Volunteer CRUD\n├── ministries/        # Ministry management\n├── events/           # Event scheduling\n├── attendance/       # Attendance tracking\n├── communications/   # Announcements\n├── reports/          # Analytics\n├── feedback/         # Evaluations\n├── templates/        # HTML templates\n├── static/           # Static files\n├── ccvms/            # Project settings\n├── README.md         # Installation guide\n└── .gitignore       # Git ignore rules\n```\n\n## Development Notes\n\n### Database Models\n- All models have proper `__str__` methods\n- Proper use of `related_name` for reverse relationships\n- **User model**: Added `approval_status` field (pending/approved/rejected)\n- **Volunteer model**: Added `supporting_document` FileField for document uploads\n- ManyToMany relationships where appropriate\n- Timestamp fields (created_at, updated_at) where needed\n\n### Forms\n- ModelForms for all CRUD operations\n- Custom widgets for better UX (Textarea, DateInput, etc.)\n- Form validation included\n\n### Views\n- Class-based views (ListView, CreateView, UpdateView, DeleteView, DetailView)\n- Permission mixins for access control\n- Proper success redirects\n\n### URL Configuration\n- App-level URL namespacing\n- RESTful URL patterns\n- Hierarchical routing\n\n## Maintenance\n\n### Adding New Users\nUse the Admin panel or Volunteers module to add users. Note: Volunteers created through the form need passwords set manually via Admin.\n\n### Updating Roles\nChange user roles in Admin panel under Users section.\n\n### Backing Up Data\n```bash\n# Backup database\ncp db.sqlite3 db.sqlite3.backup\n\n# Backup media files\ncp -r media media.backup\n```\n\n## Production Deployment Checklist\n- [ ] Set `DEBUG = False`\n- [ ] Configure `SECRET_KEY` from environment\n- [ ] Update `ALLOWED_HOSTS`\n- [ ] Configure production database (PostgreSQL/MySQL)\n- [ ] Set up proper email backend\n- [ ] Configure static files serving\n- [ ] Set up HTTPS\n- [ ] Configure CORS if needed\n- [ ] Set up logging\n- [ ] Configure backup strategy\n\n## Support & Maintenance\nFor issues or questions, refer to the Django documentation or contact the system administrator.\n\n---\n\n**Last Updated**: November 19, 2025  \n**Version**: 1.0 MVP  \n**Django Version**: 5.2.8  \n**Python Version**: 3.11\n","size_bytes":8657},"volunteers/apps.py":{"content":"from django.apps import AppConfig\n\n\nclass VolunteersConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'volunteers'\n","size_bytes":152},"attendance/migrations/__init__.py":{"content":"","size_bytes":0},"feedback/views.py":{"content":"from django.views.generic import ListView, CreateView, DetailView, UpdateView, DeleteView\nfrom django.contrib.auth.mixins import LoginRequiredMixin, UserPassesTestMixin\nfrom django.contrib import messages\nfrom django.urls import reverse_lazy\nfrom django.shortcuts import get_object_or_404\nfrom .models import VolunteerEvaluation, EventFeedback\nfrom .forms import VolunteerEvaluationForm, EventFeedbackForm\n\n\nclass FeedbackListView(LoginRequiredMixin, ListView):\n    model = VolunteerEvaluation\n    template_name = 'feedback/list.html'\n    context_object_name = 'evaluations'\n    paginate_by = 20\n    \n    def get_queryset(self):\n        queryset = super().get_queryset()\n        user = self.request.user\n        \n        if user.is_volunteer_user():\n            queryset = queryset.filter(volunteer__user=user)\n        elif user.is_coordinator():\n            ministry = user.get_managed_ministry()\n            if ministry:\n                queryset = queryset.filter(volunteer__ministries=ministry)\n        elif user.is_priest():\n            ministry = user.get_managed_ministry()\n            if ministry:\n                queryset = queryset.filter(volunteer__ministries=ministry)\n        \n        return queryset\n\n\nclass EvaluationCreateView(LoginRequiredMixin, UserPassesTestMixin, CreateView):\n    model = VolunteerEvaluation\n    form_class = VolunteerEvaluationForm\n    template_name = 'feedback/evaluation_form.html'\n    success_url = reverse_lazy('feedback:list')\n    \n    def test_func(self):\n        return self.request.user.can_provide_feedback()\n    \n    def form_valid(self, form):\n        form.instance.evaluated_by = self.request.user\n        messages.success(self.request, 'Volunteer evaluation submitted successfully.')\n        return super().form_valid(form)\n\n\nclass EvaluationUpdateView(LoginRequiredMixin, UserPassesTestMixin, UpdateView):\n    model = VolunteerEvaluation\n    form_class = VolunteerEvaluationForm\n    template_name = 'feedback/evaluation_form.html'\n    success_url = reverse_lazy('feedback:list')\n    \n    def test_func(self):\n        evaluation = self.get_object()\n        return self.request.user.can_provide_feedback() and evaluation.evaluated_by == self.request.user\n    \n    def form_valid(self, form):\n        messages.success(self.request, 'Evaluation updated successfully.')\n        return super().form_valid(form)\n\n\nclass EvaluationDeleteView(LoginRequiredMixin, UserPassesTestMixin, DeleteView):\n    model = VolunteerEvaluation\n    template_name = 'feedback/evaluation_confirm_delete.html'\n    success_url = reverse_lazy('feedback:list')\n    \n    def test_func(self):\n        evaluation = self.get_object()\n        return self.request.user.can_provide_feedback() and evaluation.evaluated_by == self.request.user\n\n\nclass EventFeedbackListView(LoginRequiredMixin, ListView):\n    model = EventFeedback\n    template_name = 'feedback/event_feedback_list.html'\n    context_object_name = 'feedback_list'\n    paginate_by = 20\n    \n    def get_queryset(self):\n        queryset = super().get_queryset()\n        user = self.request.user\n        \n        if user.is_volunteer_user():\n            queryset = queryset.filter(volunteer__user=user)\n        \n        return queryset\n\n\nclass EventFeedbackCreateView(LoginRequiredMixin, CreateView):\n    model = EventFeedback\n    form_class = EventFeedbackForm\n    template_name = 'feedback/event_feedback_form.html'\n    success_url = reverse_lazy('feedback:event_feedback_list')\n    \n    def form_valid(self, form):\n        messages.success(self.request, 'Event feedback submitted successfully.')\n        return super().form_valid(form)\n","size_bytes":3612},"feedback/apps.py":{"content":"from django.apps import AppConfig\n\n\nclass FeedbackConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'feedback'\n","size_bytes":148},"communications/urls.py":{"content":"from django.urls import path\nfrom . import views\n\napp_name = 'communications'\n\nurlpatterns = [\n    path('', views.AnnouncementListView.as_view(), name='list'),\n    path('create/', views.AnnouncementCreateView.as_view(), name='create'),\n    path('<int:pk>/', views.AnnouncementDetailView.as_view(), name='detail'),\n    path('<int:pk>/edit/', views.AnnouncementUpdateView.as_view(), name='edit'),\n    path('<int:pk>/delete/', views.AnnouncementDeleteView.as_view(), name='delete'),\n]\n","size_bytes":482},"accounts/migrations/0001_initial.py":{"content":"# Generated by Django 5.2.8 on 2025-11-19 08:54\n\nimport django.contrib.auth.models\nimport django.contrib.auth.validators\nimport django.utils.timezone\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    initial = True\n\n    dependencies = [\n        ('auth', '0012_alter_user_first_name_max_length'),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='User',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('password', models.CharField(max_length=128, verbose_name='password')),\n                ('last_login', models.DateTimeField(blank=True, null=True, verbose_name='last login')),\n                ('is_superuser', models.BooleanField(default=False, help_text='Designates that this user has all permissions without explicitly assigning them.', verbose_name='superuser status')),\n                ('username', models.CharField(error_messages={'unique': 'A user with that username already exists.'}, help_text='Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.', max_length=150, unique=True, validators=[django.contrib.auth.validators.UnicodeUsernameValidator()], verbose_name='username')),\n                ('first_name', models.CharField(blank=True, max_length=150, verbose_name='first name')),\n                ('last_name', models.CharField(blank=True, max_length=150, verbose_name='last name')),\n                ('email', models.EmailField(blank=True, max_length=254, verbose_name='email address')),\n                ('is_staff', models.BooleanField(default=False, help_text='Designates whether the user can log into this admin site.', verbose_name='staff status')),\n                ('is_active', models.BooleanField(default=True, help_text='Designates whether this user should be treated as active. Unselect this instead of deleting accounts.', verbose_name='active')),\n                ('date_joined', models.DateTimeField(default=django.utils.timezone.now, verbose_name='date joined')),\n                ('role', models.CharField(choices=[('administrator', 'Administrator'), ('priest', 'Priest'), ('coordinator', 'Coordinator'), ('volunteer', 'Volunteer')], default='volunteer', max_length=20)),\n                ('phone', models.CharField(blank=True, max_length=20)),\n                ('profile_picture', models.ImageField(blank=True, null=True, upload_to='profiles/')),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('updated_at', models.DateTimeField(auto_now=True)),\n                ('groups', models.ManyToManyField(blank=True, help_text='The groups this user belongs to. A user will get all permissions granted to each of their groups.', related_name='user_set', related_query_name='user', to='auth.group', verbose_name='groups')),\n                ('user_permissions', models.ManyToManyField(blank=True, help_text='Specific permissions for this user.', related_name='user_set', related_query_name='user', to='auth.permission', verbose_name='user permissions')),\n            ],\n            options={\n                'verbose_name': 'user',\n                'verbose_name_plural': 'users',\n                'abstract': False,\n            },\n            managers=[\n                ('objects', django.contrib.auth.models.UserManager()),\n            ],\n        ),\n    ]\n","size_bytes":3397},"accounts/forms.py":{"content":"from django import forms\nfrom django.contrib.auth.forms import UserCreationForm, UserChangeForm\nfrom .models import User\nfrom volunteers.models import Volunteer\n\n\nclass VolunteerSignupForm(UserCreationForm):\n    first_name = forms.CharField(max_length=150, required=True, widget=forms.TextInput(attrs={'class': 'form-input'}))\n    last_name = forms.CharField(max_length=150, required=True, widget=forms.TextInput(attrs={'class': 'form-input'}))\n    email = forms.EmailField(required=True, widget=forms.EmailInput(attrs={'class': 'form-input'}))\n    phone = forms.CharField(max_length=20, required=False, widget=forms.TextInput(attrs={'class': 'form-input'}))\n    \n    gender = forms.ChoiceField(choices=Volunteer.GENDER_CHOICES, required=True, widget=forms.Select(attrs={'class': 'form-input'}))\n    age = forms.IntegerField(min_value=1, max_value=120, required=True, widget=forms.NumberInput(attrs={'class': 'form-input'}))\n    address = forms.CharField(widget=forms.Textarea(attrs={'class': 'form-input', 'rows': 3}), required=False)\n    interests = forms.CharField(widget=forms.Textarea(attrs={'class': 'form-input', 'rows': 3}), required=True, help_text='Your interests and hobbies')\n    skills = forms.CharField(widget=forms.Textarea(attrs={'class': 'form-input', 'rows': 3}), required=True, help_text='Special skills or talents')\n    availability = forms.CharField(widget=forms.Textarea(attrs={'class': 'form-input', 'rows': 3}), required=True, help_text='When are you available?')\n    supporting_document = forms.FileField(required=False, widget=forms.FileInput(attrs={'class': 'form-input'}), help_text='Upload a supporting document (resume, ID, etc.)')\n    \n    class Meta:\n        model = User\n        fields = ['username', 'first_name', 'last_name', 'email', 'phone', 'password1', 'password2']\n        widgets = {\n            'username': forms.TextInput(attrs={'class': 'form-input'}),\n        }\n    \n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        self.fields['password1'].widget.attrs.update({'class': 'form-input'})\n        self.fields['password2'].widget.attrs.update({'class': 'form-input'})\n\n\nclass UserManagementForm(UserCreationForm):\n    first_name = forms.CharField(max_length=150, required=True, widget=forms.TextInput(attrs={'class': 'form-input'}))\n    last_name = forms.CharField(max_length=150, required=True, widget=forms.TextInput(attrs={'class': 'form-input'}))\n    email = forms.EmailField(required=True, widget=forms.EmailInput(attrs={'class': 'form-input'}))\n    phone = forms.CharField(max_length=20, required=False, widget=forms.TextInput(attrs={'class': 'form-input'}))\n    role = forms.ChoiceField(choices=User.ROLE_CHOICES, required=True, widget=forms.Select(attrs={'class': 'form-input'}))\n    assigned_ministry = forms.ModelChoiceField(queryset=None, required=False, widget=forms.Select(attrs={'class': 'form-input'}), help_text='Assign ministry for Priest or Coordinator')\n    approval_status = forms.ChoiceField(choices=User.APPROVAL_STATUS_CHOICES, required=True, widget=forms.Select(attrs={'class': 'form-input'}))\n    is_active = forms.BooleanField(required=False, initial=True, widget=forms.CheckboxInput(attrs={'class': 'form-checkbox'}))\n    is_suspended = forms.BooleanField(required=False, initial=False, widget=forms.CheckboxInput(attrs={'class': 'form-checkbox'}))\n    \n    class Meta:\n        model = User\n        fields = ['username', 'first_name', 'last_name', 'email', 'phone', 'role', 'assigned_ministry', 'approval_status', 'is_active', 'is_suspended', 'password1', 'password2']\n        widgets = {\n            'username': forms.TextInput(attrs={'class': 'form-input'}),\n        }\n    \n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        from ministries.models import Ministry\n        self.fields['assigned_ministry'].queryset = Ministry.objects.filter(is_active=True)\n        self.fields['password1'].widget.attrs.update({'class': 'form-input'})\n        self.fields['password2'].widget.attrs.update({'class': 'form-input'})\n\n\nclass UserEditForm(forms.ModelForm):\n    assigned_ministry = forms.ModelChoiceField(queryset=None, required=False, widget=forms.Select(attrs={'class': 'form-input'}), help_text='Assign ministry for Priest or Coordinator')\n    \n    class Meta:\n        model = User\n        fields = ['username', 'first_name', 'last_name', 'email', 'phone', 'role', 'assigned_ministry', 'approval_status', 'is_active', 'is_suspended', 'profile_picture']\n        widgets = {\n            'username': forms.TextInput(attrs={'class': 'form-input'}),\n            'first_name': forms.TextInput(attrs={'class': 'form-input'}),\n            'last_name': forms.TextInput(attrs={'class': 'form-input'}),\n            'email': forms.EmailInput(attrs={'class': 'form-input'}),\n            'phone': forms.TextInput(attrs={'class': 'form-input'}),\n            'role': forms.Select(attrs={'class': 'form-input'}),\n            'approval_status': forms.Select(attrs={'class': 'form-input'}),\n            'is_active': forms.CheckboxInput(attrs={'class': 'form-checkbox'}),\n            'is_suspended': forms.CheckboxInput(attrs={'class': 'form-checkbox'}),\n            'profile_picture': forms.FileInput(attrs={'class': 'form-input'}),\n        }\n    \n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        from ministries.models import Ministry\n        self.fields['assigned_ministry'].queryset = Ministry.objects.filter(is_active=True)\n","size_bytes":5499},"reports/__init__.py":{"content":"","size_bytes":0},"attendance/admin.py":{"content":"from django.contrib import admin\nfrom .models import Attendance\n\n@admin.register(Attendance)\nclass AttendanceAdmin(admin.ModelAdmin):\n    list_display = ['volunteer', 'event', 'status', 'marked_by', 'marked_at']\n    list_filter = ['status', 'marked_at']\n    search_fields = ['volunteer__user__first_name', 'volunteer__user__last_name', 'event__title']\n","size_bytes":352},"attendance/models.py":{"content":"from django.db import models\nfrom django.conf import settings\n\nclass Attendance(models.Model):\n    STATUS_CHOICES = (\n        ('present', 'Present'),\n        ('absent', 'Absent'),\n        ('late', 'Late'),\n        ('excused', 'Excused'),\n    )\n    \n    event = models.ForeignKey('events.Event', on_delete=models.CASCADE, related_name='attendance_records')\n    volunteer = models.ForeignKey('volunteers.Volunteer', on_delete=models.CASCADE, related_name='attendance_records')\n    status = models.CharField(max_length=10, choices=STATUS_CHOICES, default='absent')\n    notes = models.TextField(blank=True)\n    marked_by = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.SET_NULL, null=True, related_name='marked_attendance')\n    marked_at = models.DateTimeField(auto_now_add=True)\n    \n    class Meta:\n        unique_together = ('event', 'volunteer')\n        ordering = ['-marked_at']\n    \n    def __str__(self):\n        return f\"{self.volunteer} - {self.event.title} ({self.get_status_display()})\"\n","size_bytes":1009},"ministries/apps.py":{"content":"from django.apps import AppConfig\n\n\nclass MinistriesConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'ministries'\n","size_bytes":152},"events/tests.py":{"content":"from django.test import TestCase\n\n# Create your tests here.\n","size_bytes":60},"reports/urls.py":{"content":"from django.urls import path\nfrom . import views\n\napp_name = 'reports'\n\nurlpatterns = [\n    path('', views.ReportsDashboardView.as_view(), name='dashboard'),\n]\n","size_bytes":160},"communications/migrations/__init__.py":{"content":"","size_bytes":0},"accounts/__init__.py":{"content":"","size_bytes":0},"ministries/forms.py":{"content":"from django import forms\nfrom .models import Ministry, Program\n\nclass MinistryForm(forms.ModelForm):\n    class Meta:\n        model = Ministry\n        fields = ['name', 'description', 'leader', 'volunteers', 'is_active']\n        widgets = {\n            'description': forms.Textarea(attrs={'rows': 4}),\n            'volunteers': forms.CheckboxSelectMultiple(),\n        }\n\nclass ProgramForm(forms.ModelForm):\n    class Meta:\n        model = Program\n        fields = ['name', 'description', 'ministry', 'start_date', 'end_date', 'coordinator', 'is_active']\n        widgets = {\n            'description': forms.Textarea(attrs={'rows': 4}),\n            'start_date': forms.DateInput(attrs={'type': 'date'}),\n            'end_date': forms.DateInput(attrs={'type': 'date'}),\n        }\n","size_bytes":778},"events/views.py":{"content":"from django.views.generic import ListView, CreateView, UpdateView, DeleteView, DetailView\nfrom django.contrib.auth.mixins import LoginRequiredMixin, UserPassesTestMixin\nfrom django.urls import reverse_lazy\nfrom django.contrib import messages\nfrom django.shortcuts import get_object_or_404, redirect\nfrom django.views import View\nfrom django.utils import timezone\nfrom .models import Event, Task, EventReport\nfrom .forms import EventForm, TaskForm, EventReportForm, AddVolunteerToEventForm\n\nclass EventListView(LoginRequiredMixin, ListView):\n    model = Event\n    template_name = 'events/list.html'\n    context_object_name = 'events'\n    paginate_by = 20\n\nclass EventDetailView(LoginRequiredMixin, DetailView):\n    model = Event\n    template_name = 'events/detail.html'\n    context_object_name = 'event'\n\nclass EventCreateView(LoginRequiredMixin, UserPassesTestMixin, CreateView):\n    model = Event\n    form_class = EventForm\n    template_name = 'events/form.html'\n    success_url = reverse_lazy('events:list')\n    \n    def test_func(self):\n        user = self.request.user\n        if not user.is_priest():\n            return False\n        if not user.assigned_ministry:\n            return False\n        return True\n    \n    def handle_no_permission(self):\n        if self.request.user.is_authenticated and self.request.user.is_priest() and not self.request.user.assigned_ministry:\n            messages.error(self.request, 'You must be assigned to a ministry to create events.')\n        return super().handle_no_permission()\n    \n    def get_form_kwargs(self):\n        kwargs = super().get_form_kwargs()\n        kwargs['user'] = self.request.user\n        return kwargs\n    \n    def form_valid(self, form):\n        form.instance.ministry = self.request.user.assigned_ministry\n        messages.success(self.request, 'Event created successfully.')\n        return super().form_valid(form)\n\nclass EventUpdateView(LoginRequiredMixin, UserPassesTestMixin, UpdateView):\n    model = Event\n    form_class = EventForm\n    template_name = 'events/form.html'\n    success_url = reverse_lazy('events:list')\n    \n    def test_func(self):\n        user = self.request.user\n        event = self.get_object()\n        \n        if not user.is_priest():\n            return False\n        \n        if not user.assigned_ministry:\n            return False\n        \n        return event.ministry == user.assigned_ministry\n    \n    def get_form_kwargs(self):\n        kwargs = super().get_form_kwargs()\n        kwargs['user'] = self.request.user\n        return kwargs\n    \n    def form_valid(self, form):\n        messages.success(self.request, 'Event updated successfully.')\n        return super().form_valid(form)\n\nclass EventDeleteView(LoginRequiredMixin, UserPassesTestMixin, DeleteView):\n    model = Event\n    template_name = 'events/confirm_delete.html'\n    success_url = reverse_lazy('events:list')\n    \n    def test_func(self):\n        user = self.request.user\n        event = self.get_object()\n        \n        if not user.is_priest():\n            return False\n        \n        if not user.assigned_ministry:\n            return False\n        \n        return event.ministry == user.assigned_ministry\n\n\nclass CoordinatorEventDetailView(LoginRequiredMixin, UserPassesTestMixin, DetailView):\n    model = Event\n    template_name = 'events/coordinator_detail.html'\n    context_object_name = 'event'\n    \n    def test_func(self):\n        user = self.request.user\n        event = self.get_object()\n        return user.is_coordinator() and event.coordinator == user\n    \n    def get_context_data(self, **kwargs):\n        context = super().get_context_data(**kwargs)\n        event = self.get_object()\n        context['tasks'] = event.tasks.all()\n        context['reports'] = event.reports.filter(submitted_by=self.request.user)\n        context['add_volunteer_form'] = AddVolunteerToEventForm(event=event, user=self.request.user)\n        return context\n\n\nclass AddVolunteerToEventView(LoginRequiredMixin, UserPassesTestMixin, View):\n    def test_func(self):\n        event = get_object_or_404(Event, pk=self.kwargs['pk'])\n        user = self.request.user\n        return user.is_coordinator() and event.coordinator == user\n    \n    def post(self, request, pk):\n        event = get_object_or_404(Event, pk=pk)\n        form = AddVolunteerToEventForm(request.POST, event=event, user=request.user)\n        \n        if form.is_valid():\n            volunteers = form.cleaned_data['volunteers']\n            for volunteer in volunteers:\n                event.assigned_volunteers.add(volunteer)\n            messages.success(request, f'{volunteers.count()} volunteer(s) added to event.')\n        else:\n            messages.error(request, 'Error adding volunteers to event.')\n        \n        return redirect('events:coordinator_detail', pk=pk)\n\n\nclass RemoveVolunteerFromEventView(LoginRequiredMixin, UserPassesTestMixin, View):\n    def test_func(self):\n        event = get_object_or_404(Event, pk=self.kwargs['event_pk'])\n        user = self.request.user\n        return user.is_coordinator() and event.coordinator == user\n    \n    def post(self, request, event_pk, volunteer_pk):\n        event = get_object_or_404(Event, pk=event_pk)\n        volunteer = get_object_or_404(event.assigned_volunteers, pk=volunteer_pk)\n        event.assigned_volunteers.remove(volunteer)\n        messages.success(request, f'{volunteer.user.get_full_name()} removed from event.')\n        return redirect('events:coordinator_detail', pk=event_pk)\n\n\nclass TaskCreateView(LoginRequiredMixin, UserPassesTestMixin, CreateView):\n    model = Task\n    form_class = TaskForm\n    template_name = 'events/task_form.html'\n    \n    def test_func(self):\n        event = get_object_or_404(Event, pk=self.kwargs['event_pk'])\n        user = self.request.user\n        return user.is_coordinator() and event.coordinator == user\n    \n    def get_form_kwargs(self):\n        kwargs = super().get_form_kwargs()\n        event = get_object_or_404(Event, pk=self.kwargs['event_pk'])\n        kwargs['event'] = event\n        kwargs['user'] = self.request.user\n        return kwargs\n    \n    def form_valid(self, form):\n        event = get_object_or_404(Event, pk=self.kwargs['event_pk'])\n        form.instance.event = event\n        form.instance.assigned_by = self.request.user\n        messages.success(self.request, 'Task created successfully.')\n        return super().form_valid(form)\n    \n    def get_success_url(self):\n        return reverse_lazy('events:coordinator_detail', kwargs={'pk': self.kwargs['event_pk']})\n\n\nclass TaskUpdateView(LoginRequiredMixin, UserPassesTestMixin, UpdateView):\n    model = Task\n    form_class = TaskForm\n    template_name = 'events/task_form.html'\n    \n    def test_func(self):\n        task = self.get_object()\n        user = self.request.user\n        return user.is_coordinator() and task.event.coordinator == user\n    \n    def get_form_kwargs(self):\n        kwargs = super().get_form_kwargs()\n        task = self.get_object()\n        kwargs['event'] = task.event\n        kwargs['user'] = self.request.user\n        return kwargs\n    \n    def form_valid(self, form):\n        messages.success(self.request, 'Task updated successfully.')\n        return super().form_valid(form)\n    \n    def get_success_url(self):\n        return reverse_lazy('events:coordinator_detail', kwargs={'pk': self.object.event.pk})\n\n\nclass TaskDeleteView(LoginRequiredMixin, UserPassesTestMixin, DeleteView):\n    model = Task\n    template_name = 'events/task_confirm_delete.html'\n    \n    def test_func(self):\n        task = self.get_object()\n        user = self.request.user\n        return user.is_coordinator() and task.event.coordinator == user\n    \n    def get_success_url(self):\n        return reverse_lazy('events:coordinator_detail', kwargs={'pk': self.object.event.pk})\n\n\nclass EventReportCreateView(LoginRequiredMixin, UserPassesTestMixin, CreateView):\n    model = EventReport\n    form_class = EventReportForm\n    template_name = 'events/report_form.html'\n    \n    def test_func(self):\n        event = get_object_or_404(Event, pk=self.kwargs['event_pk'])\n        user = self.request.user\n        return user.is_coordinator() and event.coordinator == user\n    \n    def form_valid(self, form):\n        event = get_object_or_404(Event, pk=self.kwargs['event_pk'])\n        form.instance.event = event\n        form.instance.submitted_by = self.request.user\n        \n        if form.instance.status == 'submitted':\n            form.instance.submitted_at = timezone.now()\n        \n        messages.success(self.request, 'Event report saved successfully.')\n        return super().form_valid(form)\n    \n    def get_success_url(self):\n        return reverse_lazy('events:coordinator_detail', kwargs={'pk': self.kwargs['event_pk']})\n\n\nclass EventReportUpdateView(LoginRequiredMixin, UserPassesTestMixin, UpdateView):\n    model = EventReport\n    form_class = EventReportForm\n    template_name = 'events/report_form.html'\n    \n    def test_func(self):\n        report = self.get_object()\n        user = self.request.user\n        return user.is_coordinator() and report.submitted_by == user and report.status != 'reviewed'\n    \n    def form_valid(self, form):\n        if form.instance.status == 'submitted' and not form.instance.submitted_at:\n            form.instance.submitted_at = timezone.now()\n        \n        messages.success(self.request, 'Event report updated successfully.')\n        return super().form_valid(form)\n    \n    def get_success_url(self):\n        return reverse_lazy('events:coordinator_detail', kwargs={'pk': self.object.event.pk})\n\n\nclass EventReportDetailView(LoginRequiredMixin, UserPassesTestMixin, DetailView):\n    model = EventReport\n    template_name = 'events/report_detail.html'\n    context_object_name = 'report'\n    \n    def test_func(self):\n        report = self.get_object()\n        user = self.request.user\n        return (user.is_coordinator() and report.submitted_by == user) or \\\n               (user.is_priest() and report.event.ministry == user.assigned_ministry) or \\\n               user.is_administrator()\n","size_bytes":10060},"reports/apps.py":{"content":"from django.apps import AppConfig\n\n\nclass ReportsConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'reports'\n","size_bytes":146},"ministries/urls.py":{"content":"from django.urls import path\nfrom . import views\n\napp_name = 'ministries'\n\nurlpatterns = [\n    path('', views.MinistryListView.as_view(), name='list'),\n    path('create/', views.MinistryCreateView.as_view(), name='create'),\n    path('<int:pk>/', views.MinistryDetailView.as_view(), name='detail'),\n    path('<int:pk>/edit/', views.MinistryUpdateView.as_view(), name='edit'),\n    path('<int:pk>/delete/', views.MinistryDeleteView.as_view(), name='delete'),\n]\n","size_bytes":458},"ccvms/wsgi.py":{"content":"\"\"\"\nWSGI config for ccvms project.\n\nIt exposes the WSGI callable as a module-level variable named ``application``.\n\nFor more information on this file, see\nhttps://docs.djangoproject.com/en/5.2/howto/deployment/wsgi/\n\"\"\"\n\nimport os\n\nfrom django.core.wsgi import get_wsgi_application\n\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'ccvms.settings')\n\napplication = get_wsgi_application()\n","size_bytes":387},"communications/tests.py":{"content":"from django.test import TestCase\n\n# Create your tests here.\n","size_bytes":60},"volunteers/views.py":{"content":"from django.views.generic import ListView, CreateView, UpdateView, DeleteView, DetailView\nfrom django.contrib.auth.mixins import LoginRequiredMixin, UserPassesTestMixin\nfrom django.urls import reverse_lazy\nfrom django.db.models import Q\nfrom django.shortcuts import get_object_or_404, redirect\nfrom django.contrib import messages\nfrom django.views import View\nfrom .models import Volunteer\nfrom .forms import VolunteerForm\n\nclass VolunteerListView(LoginRequiredMixin, UserPassesTestMixin, ListView):\n    model = Volunteer\n    template_name = 'volunteers/list.html'\n    context_object_name = 'volunteers'\n    paginate_by = 20\n    \n    def test_func(self):\n        return self.request.user.can_manage_volunteers() or self.request.user.can_view_reports()\n    \n    def get_queryset(self):\n        queryset = super().get_queryset()\n        user = self.request.user\n        \n        if user.is_coordinator() or user.is_priest():\n            ministry = user.get_managed_ministry()\n            if ministry:\n                queryset = queryset.filter(ministries=ministry)\n            else:\n                queryset = queryset.none()\n        \n        search = self.request.GET.get('search')\n        if search:\n            queryset = queryset.filter(\n                Q(user__first_name__icontains=search) |\n                Q(user__last_name__icontains=search) |\n                Q(user__email__icontains=search) |\n                Q(skills__icontains=search)\n            )\n        return queryset\n\nclass VolunteerDetailView(LoginRequiredMixin, UserPassesTestMixin, DetailView):\n    model = Volunteer\n    template_name = 'volunteers/detail.html'\n    context_object_name = 'volunteer'\n    \n    def test_func(self):\n        user = self.request.user\n        volunteer = self.get_object()\n        \n        if user.is_administrator():\n            return True\n        \n        if user.is_volunteer_user():\n            return volunteer.user == user\n        \n        if user.is_coordinator() or user.is_priest():\n            ministry = user.get_managed_ministry()\n            if ministry:\n                return volunteer.ministries.filter(id=ministry.id).exists()\n        \n        return False\n\nclass VolunteerCreateView(LoginRequiredMixin, UserPassesTestMixin, CreateView):\n    model = Volunteer\n    form_class = VolunteerForm\n    template_name = 'volunteers/form.html'\n    success_url = reverse_lazy('volunteers:list')\n    \n    def test_func(self):\n        return self.request.user.can_manage_volunteers()\n    \n    def get_form(self, form_class=None):\n        form = super().get_form(form_class)\n        user = self.request.user\n        \n        if user.is_coordinator() or user.is_priest():\n            ministry = user.get_managed_ministry()\n            if ministry:\n                from ministries.models import Ministry\n                form.fields['ministries'].queryset = Ministry.objects.filter(id=ministry.id)\n            else:\n                from ministries.models import Ministry\n                form.fields['ministries'].queryset = Ministry.objects.none()\n        \n        return form\n    \n    def form_valid(self, form):\n        user = self.request.user\n        \n        if user.is_coordinator() or user.is_priest():\n            ministry = user.get_managed_ministry()\n            if not ministry:\n                messages.error(self.request, 'You must be assigned to a ministry to create volunteers.')\n                return self.form_invalid(form)\n            \n            selected_ministries = form.cleaned_data.get('ministries', [])\n            for selected_ministry in selected_ministries:\n                if selected_ministry.id != ministry.id:\n                    messages.error(self.request, 'You can only assign volunteers to your own ministry.')\n                    return self.form_invalid(form)\n        \n        return super().form_valid(form)\n\nclass VolunteerUpdateView(LoginRequiredMixin, UserPassesTestMixin, UpdateView):\n    model = Volunteer\n    form_class = VolunteerForm\n    template_name = 'volunteers/form.html'\n    success_url = reverse_lazy('volunteers:list')\n    \n    def test_func(self):\n        user = self.request.user\n        volunteer = self.get_object()\n        \n        if user.is_administrator():\n            return True\n        \n        if user.is_coordinator() or user.is_priest():\n            ministry = user.get_managed_ministry()\n            if ministry:\n                return volunteer.ministries.filter(id=ministry.id).exists()\n        \n        return False\n    \n    def get_form(self, form_class=None):\n        form = super().get_form(form_class)\n        user = self.request.user\n        \n        if user.is_coordinator() or user.is_priest():\n            ministry = user.get_managed_ministry()\n            if ministry:\n                from ministries.models import Ministry\n                form.fields['ministries'].queryset = Ministry.objects.filter(id=ministry.id)\n            else:\n                from ministries.models import Ministry\n                form.fields['ministries'].queryset = Ministry.objects.none()\n        \n        return form\n    \n    def form_valid(self, form):\n        user = self.request.user\n        \n        if user.is_coordinator() or user.is_priest():\n            ministry = user.get_managed_ministry()\n            if not ministry:\n                messages.error(self.request, 'You must be assigned to a ministry.')\n                return self.form_invalid(form)\n            \n            selected_ministries = form.cleaned_data.get('ministries', [])\n            for selected_ministry in selected_ministries:\n                if selected_ministry.id != ministry.id:\n                    messages.error(self.request, 'You can only assign volunteers to your own ministry.')\n                    return self.form_invalid(form)\n        \n        return super().form_valid(form)\n\nclass VolunteerDeleteView(LoginRequiredMixin, UserPassesTestMixin, DeleteView):\n    model = Volunteer\n    template_name = 'volunteers/confirm_delete.html'\n    success_url = reverse_lazy('volunteers:list')\n    \n    def test_func(self):\n        user = self.request.user\n        volunteer = self.get_object()\n        \n        if user.is_administrator():\n            return True\n        \n        if user.is_coordinator() or user.is_priest():\n            ministry = user.get_managed_ministry()\n            if ministry:\n                return volunteer.ministries.filter(id=ministry.id).exists()\n        \n        return False\n\nclass VolunteerApproveView(LoginRequiredMixin, UserPassesTestMixin, View):\n    def test_func(self):\n        return self.request.user.can_approve_volunteers()\n    \n    def post(self, request, pk):\n        volunteer = get_object_or_404(Volunteer, pk=pk)\n        user = request.user\n        \n        if user.is_priest():\n            ministry = user.get_managed_ministry()\n            if not ministry or not volunteer.ministries.filter(id=ministry.id).exists():\n                messages.error(request, 'You can only approve volunteers within your ministry.')\n                return redirect('volunteers:list')\n        \n        volunteer.user.approval_status = 'approved'\n        volunteer.user.is_active = True\n        volunteer.user.save()\n        messages.success(request, f'{volunteer.user.get_full_name()} has been approved and can now log in.')\n        return redirect('volunteers:list')\n\nclass VolunteerRejectView(LoginRequiredMixin, UserPassesTestMixin, View):\n    def test_func(self):\n        return self.request.user.can_approve_volunteers()\n    \n    def post(self, request, pk):\n        volunteer = get_object_or_404(Volunteer, pk=pk)\n        user = request.user\n        \n        if user.is_priest():\n            ministry = user.get_managed_ministry()\n            if not ministry or not volunteer.ministries.filter(id=ministry.id).exists():\n                messages.error(request, 'You can only reject volunteers within your ministry.')\n                return redirect('volunteers:list')\n        \n        volunteer.user.approval_status = 'rejected'\n        volunteer.user.is_active = False\n        volunteer.user.save()\n        messages.warning(request, f'{volunteer.user.get_full_name()} has been rejected.')\n        return redirect('volunteers:list')\n","size_bytes":8209},"attendance/migrations/0001_initial.py":{"content":"# Generated by Django 5.2.8 on 2025-11-19 08:54\n\nimport django.db.models.deletion\nfrom django.conf import settings\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    initial = True\n\n    dependencies = [\n        ('events', '0001_initial'),\n        ('volunteers', '0001_initial'),\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='Attendance',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('status', models.CharField(choices=[('present', 'Present'), ('absent', 'Absent'), ('late', 'Late'), ('excused', 'Excused')], default='absent', max_length=10)),\n                ('notes', models.TextField(blank=True)),\n                ('marked_at', models.DateTimeField(auto_now_add=True)),\n                ('event', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attendance_records', to='events.event')),\n                ('marked_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='marked_attendance', to=settings.AUTH_USER_MODEL)),\n                ('volunteer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attendance_records', to='volunteers.volunteer')),\n            ],\n            options={\n                'ordering': ['-marked_at'],\n                'unique_together': {('event', 'volunteer')},\n            },\n        ),\n    ]\n","size_bytes":1562},"volunteers/migrations/0001_initial.py":{"content":"# Generated by Django 5.2.8 on 2025-11-19 08:54\n\nimport django.db.models.deletion\nfrom django.conf import settings\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    initial = True\n\n    dependencies = [\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='Volunteer',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('gender', models.CharField(choices=[('M', 'Male'), ('F', 'Female')], max_length=1)),\n                ('age', models.PositiveIntegerField()),\n                ('address', models.TextField(blank=True)),\n                ('interests', models.TextField(help_text='Volunteer interests and hobbies')),\n                ('skills', models.TextField(help_text='Special skills or talents')),\n                ('availability', models.TextField(help_text='When the volunteer is available')),\n                ('date_joined', models.DateField(auto_now_add=True)),\n                ('is_active', models.BooleanField(default=True)),\n                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='volunteer_profile', to=settings.AUTH_USER_MODEL)),\n            ],\n            options={\n                'ordering': ['-date_joined'],\n            },\n        ),\n    ]\n","size_bytes":1433},"volunteers/__init__.py":{"content":"","size_bytes":0},"feedback/admin.py":{"content":"from django.contrib import admin\nfrom .models import VolunteerEvaluation, EventFeedback\n\n@admin.register(VolunteerEvaluation)\nclass VolunteerEvaluationAdmin(admin.ModelAdmin):\n    list_display = ['volunteer', 'event', 'rating', 'evaluated_by', 'created_at']\n    list_filter = ['rating', 'created_at']\n    search_fields = ['volunteer__user__first_name', 'volunteer__user__last_name', 'comments']\n\n@admin.register(EventFeedback)\nclass EventFeedbackAdmin(admin.ModelAdmin):\n    list_display = ['event', 'volunteer', 'would_participate_again', 'submitted_at']\n    list_filter = ['would_participate_again', 'submitted_at']\n    search_fields = ['event__title', 'volunteer__user__first_name', 'feedback']\n","size_bytes":698},"attendance/apps.py":{"content":"from django.apps import AppConfig\n\n\nclass AttendanceConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'attendance'\n","size_bytes":152},"reports/tests.py":{"content":"from django.test import TestCase\n\n# Create your tests here.\n","size_bytes":60},"volunteers/admin.py":{"content":"from django.contrib import admin\nfrom .models import Volunteer\n\n@admin.register(Volunteer)\nclass VolunteerAdmin(admin.ModelAdmin):\n    list_display = ['user', 'gender', 'age', 'date_joined', 'is_active']\n    list_filter = ['gender', 'is_active', 'date_joined']\n    search_fields = ['user__first_name', 'user__last_name', 'user__email', 'skills', 'interests']\n","size_bytes":359},"events/urls.py":{"content":"from django.urls import path\nfrom . import views\n\napp_name = 'events'\n\nurlpatterns = [\n    path('', views.EventListView.as_view(), name='list'),\n    path('create/', views.EventCreateView.as_view(), name='create'),\n    path('<int:pk>/', views.EventDetailView.as_view(), name='detail'),\n    path('<int:pk>/edit/', views.EventUpdateView.as_view(), name='edit'),\n    path('<int:pk>/delete/', views.EventDeleteView.as_view(), name='delete'),\n    \n    path('<int:pk>/coordinator/', views.CoordinatorEventDetailView.as_view(), name='coordinator_detail'),\n    path('<int:pk>/add-volunteers/', views.AddVolunteerToEventView.as_view(), name='add_volunteers'),\n    path('<int:event_pk>/remove-volunteer/<int:volunteer_pk>/', views.RemoveVolunteerFromEventView.as_view(), name='remove_volunteer'),\n    \n    path('<int:event_pk>/tasks/create/', views.TaskCreateView.as_view(), name='task_create'),\n    path('tasks/<int:pk>/edit/', views.TaskUpdateView.as_view(), name='task_edit'),\n    path('tasks/<int:pk>/delete/', views.TaskDeleteView.as_view(), name='task_delete'),\n    \n    path('<int:event_pk>/reports/create/', views.EventReportCreateView.as_view(), name='report_create'),\n    path('reports/<int:pk>/edit/', views.EventReportUpdateView.as_view(), name='report_edit'),\n    path('reports/<int:pk>/', views.EventReportDetailView.as_view(), name='report_detail'),\n]\n","size_bytes":1356},"volunteers/forms.py":{"content":"from django import forms\nfrom .models import Volunteer\nfrom accounts.models import User\nfrom ministries.models import Ministry\n\nclass VolunteerForm(forms.ModelForm):\n    first_name = forms.CharField(max_length=150, required=True)\n    last_name = forms.CharField(max_length=150, required=True)\n    email = forms.EmailField(required=True)\n    phone = forms.CharField(max_length=20, required=False)\n    username = forms.CharField(max_length=150, required=True)\n    ministries = forms.ModelMultipleChoiceField(\n        queryset=Ministry.objects.filter(is_active=True),\n        required=True,\n        widget=forms.CheckboxSelectMultiple\n    )\n    \n    class Meta:\n        model = Volunteer\n        fields = ['gender', 'age', 'address', 'interests', 'skills', 'availability', 'ministries', 'is_active']\n        widgets = {\n            'address': forms.Textarea(attrs={'rows': 3}),\n            'interests': forms.Textarea(attrs={'rows': 3}),\n            'skills': forms.Textarea(attrs={'rows': 3}),\n            'availability': forms.Textarea(attrs={'rows': 3}),\n        }\n    \n    def __init__(self, *args, **kwargs):\n        instance = kwargs.get('instance')\n        super().__init__(*args, **kwargs)\n        if instance and instance.user:\n            self.fields['first_name'].initial = instance.user.first_name\n            self.fields['last_name'].initial = instance.user.last_name\n            self.fields['email'].initial = instance.user.email\n            self.fields['phone'].initial = instance.user.phone\n            self.fields['username'].initial = instance.user.username\n    \n    def save(self, commit=True):\n        volunteer = super().save(commit=False)\n        if not volunteer.user_id:\n            user = User.objects.create_user(\n                username=self.cleaned_data['username'],\n                email=self.cleaned_data['email'],\n                first_name=self.cleaned_data['first_name'],\n                last_name=self.cleaned_data['last_name'],\n                role='volunteer'\n            )\n            user.phone = self.cleaned_data.get('phone', '')\n            user.save()\n            volunteer.user = user\n        else:\n            user = volunteer.user\n            user.first_name = self.cleaned_data['first_name']\n            user.last_name = self.cleaned_data['last_name']\n            user.email = self.cleaned_data['email']\n            user.phone = self.cleaned_data.get('phone', '')\n            user.save()\n        \n        if commit:\n            volunteer.save()\n            volunteer.ministries.set(self.cleaned_data['ministries'])\n        return volunteer\n","size_bytes":2584},"reports/views.py":{"content":"from django.views.generic import TemplateView\nfrom django.contrib.auth.mixins import LoginRequiredMixin, UserPassesTestMixin\nfrom django.db.models import Count, Q\nfrom volunteers.models import Volunteer\nfrom ministries.models import Ministry\nfrom events.models import Event\nfrom attendance.models import Attendance\n\nclass ReportsDashboardView(LoginRequiredMixin, UserPassesTestMixin, TemplateView):\n    template_name = 'reports/dashboard.html'\n    \n    def test_func(self):\n        return self.request.user.can_view_reports()\n    \n    def get_context_data(self, **kwargs):\n        context = super().get_context_data(**kwargs)\n        context['total_volunteers'] = Volunteer.objects.filter(is_active=True).count()\n        context['total_ministries'] = Ministry.objects.filter(is_active=True).count()\n        context['total_events'] = Event.objects.filter(is_active=True).count()\n        context['total_attendance'] = Attendance.objects.count()\n        \n        context['active_volunteers'] = Volunteer.objects.filter(is_active=True).count()\n        context['inactive_volunteers'] = Volunteer.objects.filter(is_active=False).count()\n        \n        context['gender_stats'] = Volunteer.objects.values('gender').annotate(count=Count('id'))\n        \n        context['recent_events'] = Event.objects.filter(is_active=True).order_by('-start_datetime')[:5]\n        \n        return context\n","size_bytes":1382},"ccvms/asgi.py":{"content":"\"\"\"\nASGI config for ccvms project.\n\nIt exposes the ASGI callable as a module-level variable named ``application``.\n\nFor more information on this file, see\nhttps://docs.djangoproject.com/en/5.2/howto/deployment/asgi/\n\"\"\"\n\nimport os\n\nfrom django.core.asgi import get_asgi_application\n\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'ccvms.settings')\n\napplication = get_asgi_application()\n","size_bytes":387},"events/forms.py":{"content":"from django import forms\nfrom .models import Event, Task, EventReport\nfrom volunteers.models import Volunteer\nfrom django.contrib.auth import get_user_model\n\nUser = get_user_model()\n\nclass EventForm(forms.ModelForm):\n    class Meta:\n        model = Event\n        fields = ['title', 'description', 'event_type', 'ministry', 'start_datetime', \n                  'end_datetime', 'location', 'coordinator', 'assigned_volunteers', \n                  'max_volunteers', 'is_active']\n        widgets = {\n            'description': forms.Textarea(attrs={'rows': 4}),\n            'start_datetime': forms.DateTimeInput(attrs={'type': 'datetime-local'}),\n            'end_datetime': forms.DateTimeInput(attrs={'type': 'datetime-local'}),\n            'assigned_volunteers': forms.CheckboxSelectMultiple(),\n        }\n    \n    def __init__(self, *args, **kwargs):\n        user = kwargs.pop('user', None)\n        super().__init__(*args, **kwargs)\n        \n        if user and user.is_priest() and user.assigned_ministry:\n            ministry = user.assigned_ministry\n            \n            self.fields['ministry'].widget = forms.HiddenInput()\n            self.fields['ministry'].initial = ministry\n            self.fields['ministry'].disabled = True\n            \n            self.fields['coordinator'].queryset = User.objects.filter(\n                role='coordinator',\n                assigned_ministry=ministry\n            )\n            \n            self.fields['assigned_volunteers'].queryset = Volunteer.objects.filter(\n                ministries=ministry\n            )\n\n\nclass TaskForm(forms.ModelForm):\n    class Meta:\n        model = Task\n        fields = ['title', 'description', 'assigned_to', 'status', 'due_date']\n        widgets = {\n            'description': forms.Textarea(attrs={'rows': 3}),\n            'due_date': forms.DateInput(attrs={'type': 'date'}),\n        }\n    \n    def __init__(self, *args, **kwargs):\n        event = kwargs.pop('event', None)\n        user = kwargs.pop('user', None)\n        super().__init__(*args, **kwargs)\n        \n        if event and user:\n            if user.is_coordinator() and user.assigned_ministry:\n                self.fields['assigned_to'].queryset = Volunteer.objects.filter(\n                    ministries=user.assigned_ministry\n                )\n            elif event.ministry:\n                self.fields['assigned_to'].queryset = Volunteer.objects.filter(\n                    ministries=event.ministry\n                )\n\n\nclass EventReportForm(forms.ModelForm):\n    class Meta:\n        model = EventReport\n        fields = ['title', 'summary', 'attendance_count', 'volunteer_performance', \n                  'challenges', 'recommendations', 'status']\n        widgets = {\n            'summary': forms.Textarea(attrs={'rows': 4}),\n            'volunteer_performance': forms.Textarea(attrs={'rows': 3}),\n            'challenges': forms.Textarea(attrs={'rows': 3}),\n            'recommendations': forms.Textarea(attrs={'rows': 3}),\n        }\n\n\nclass AddVolunteerToEventForm(forms.Form):\n    volunteers = forms.ModelMultipleChoiceField(\n        queryset=Volunteer.objects.none(),\n        widget=forms.CheckboxSelectMultiple(),\n        required=False,\n        label=\"Select Volunteers\"\n    )\n    \n    def __init__(self, *args, **kwargs):\n        event = kwargs.pop('event', None)\n        user = kwargs.pop('user', None)\n        super().__init__(*args, **kwargs)\n        \n        if event and user and user.assigned_ministry:\n            current_volunteers = event.assigned_volunteers.all()\n            self.fields['volunteers'].queryset = Volunteer.objects.filter(\n                ministries=user.assigned_ministry\n            ).exclude(id__in=current_volunteers.values_list('id', flat=True))\n","size_bytes":3735},"volunteers/tests.py":{"content":"from django.test import TestCase\n\n# Create your tests here.\n","size_bytes":60},"accounts/views.py":{"content":"from django.shortcuts import render, redirect, get_object_or_404\nfrom django.contrib import messages\nfrom django.contrib.auth import login\nfrom django.contrib.auth.mixins import LoginRequiredMixin, UserPassesTestMixin\nfrom django.views.generic import ListView, CreateView, UpdateView, DeleteView, View\nfrom django.urls import reverse_lazy\nfrom django.db import transaction\nfrom django.db.models import Q\nfrom volunteers.models import Volunteer\nfrom .forms import VolunteerSignupForm, UserManagementForm, UserEditForm\nfrom .models import User\n\n\ndef volunteer_signup(request):\n    if request.method == 'POST':\n        form = VolunteerSignupForm(request.POST, request.FILES)\n        if form.is_valid():\n            try:\n                with transaction.atomic():\n                    user = form.save(commit=False)\n                    user.role = 'volunteer'\n                    user.approval_status = 'pending'\n                    user.is_active = False\n                    user.save()\n                    \n                    Volunteer.objects.create(\n                        user=user,\n                        gender=form.cleaned_data['gender'],\n                        age=form.cleaned_data['age'],\n                        address=form.cleaned_data.get('address', ''),\n                        interests=form.cleaned_data['interests'],\n                        skills=form.cleaned_data['skills'],\n                        availability=form.cleaned_data['availability'],\n                        supporting_document=form.cleaned_data.get('supporting_document')\n                    )\n                    \n                    messages.success(request, 'Your volunteer account has been created successfully! Please wait for admin approval before you can log in.')\n                    return redirect('accounts:login')\n            except Exception as e:\n                messages.error(request, f'An error occurred during registration: {str(e)}')\n        else:\n            for field, errors in form.errors.items():\n                for error in errors:\n                    messages.error(request, f'{field}: {error}')\n    else:\n        form = VolunteerSignupForm()\n    \n    return render(request, 'accounts/signup.html', {'form': form})\n\n\nclass UserListView(LoginRequiredMixin, UserPassesTestMixin, ListView):\n    model = User\n    template_name = 'accounts/user_list.html'\n    context_object_name = 'users'\n    paginate_by = 20\n    \n    def test_func(self):\n        return self.request.user.can_manage_all_users()\n    \n    def get_queryset(self):\n        queryset = super().get_queryset()\n        search = self.request.GET.get('search')\n        role = self.request.GET.get('role')\n        \n        if search:\n            queryset = queryset.filter(\n                Q(username__icontains=search) |\n                Q(first_name__icontains=search) |\n                Q(last_name__icontains=search) |\n                Q(email__icontains=search)\n            )\n        \n        if role:\n            queryset = queryset.filter(role=role)\n        \n        return queryset.order_by('-created_at')\n    \n    def get_context_data(self, **kwargs):\n        context = super().get_context_data(**kwargs)\n        from ministries.models import Ministry\n        context['ministries'] = Ministry.objects.filter(is_active=True).order_by('name')\n        return context\n\n\nclass UserCreateView(LoginRequiredMixin, UserPassesTestMixin, CreateView):\n    model = User\n    form_class = UserManagementForm\n    template_name = 'accounts/user_form.html'\n    success_url = reverse_lazy('accounts:user_list')\n    \n    def test_func(self):\n        return self.request.user.can_manage_all_users()\n    \n    def form_valid(self, form):\n        messages.success(self.request, f'User {form.instance.username} created successfully.')\n        return super().form_valid(form)\n\n\nclass UserUpdateView(LoginRequiredMixin, UserPassesTestMixin, UpdateView):\n    model = User\n    form_class = UserEditForm\n    template_name = 'accounts/user_form.html'\n    success_url = reverse_lazy('accounts:user_list')\n    \n    def test_func(self):\n        return self.request.user.can_manage_all_users()\n    \n    def form_valid(self, form):\n        messages.success(self.request, f'User {form.instance.username} updated successfully.')\n        return super().form_valid(form)\n\n\nclass UserDeleteView(LoginRequiredMixin, UserPassesTestMixin, DeleteView):\n    model = User\n    template_name = 'accounts/user_confirm_delete.html'\n    success_url = reverse_lazy('accounts:user_list')\n    \n    def test_func(self):\n        user = self.get_object()\n        return self.request.user.can_manage_all_users() and user.id != self.request.user.id\n    \n    def delete(self, request, *args, **kwargs):\n        messages.success(request, f'User deleted successfully.')\n        return super().delete(request, *args, **kwargs)\n\n\nclass UserSuspendView(LoginRequiredMixin, UserPassesTestMixin, View):\n    def test_func(self):\n        return self.request.user.can_manage_all_users()\n    \n    def post(self, request, pk):\n        user = get_object_or_404(User, pk=pk)\n        if user.id == request.user.id:\n            messages.error(request, 'You cannot suspend yourself.')\n            return redirect('accounts:user_list')\n        \n        user.is_suspended = not user.is_suspended\n        user.save()\n        \n        status = 'suspended' if user.is_suspended else 'unsuspended'\n        messages.success(request, f'{user.get_full_name()} has been {status}.')\n        return redirect('accounts:user_list')\n\n\nclass AssignRoleView(LoginRequiredMixin, UserPassesTestMixin, View):\n    def test_func(self):\n        return self.request.user.can_assign_roles()\n    \n    def post(self, request, pk):\n        target_user = get_object_or_404(User, pk=pk)\n        new_role = request.POST.get('role')\n        current_user = request.user\n        \n        if new_role not in dict(User.ROLE_CHOICES):\n            messages.error(request, 'Invalid role selected.')\n            return redirect('accounts:user_list')\n        \n        if current_user.is_administrator():\n            target_user.role = new_role\n            target_user.save()\n            messages.success(request, f'{target_user.get_full_name()} role changed to {target_user.get_role_display()}.')\n        \n        elif current_user.is_priest():\n            ministry = current_user.get_managed_ministry()\n            if not ministry:\n                messages.error(request, 'You must be assigned to a ministry to change roles.')\n                return redirect('accounts:user_list')\n            \n            if target_user.role != 'volunteer':\n                messages.error(request, 'Priests can only promote volunteers to coordinators.')\n                return redirect('accounts:user_list')\n            \n            if new_role != 'coordinator':\n                messages.error(request, 'Priests can only assign the coordinator role.')\n                return redirect('accounts:user_list')\n            \n            if not hasattr(target_user, 'volunteer_profile'):\n                messages.error(request, 'Target user must have a volunteer profile.')\n                return redirect('accounts:user_list')\n            \n            if not target_user.volunteer_profile.ministries.filter(id=ministry.id).exists():\n                messages.error(request, 'You can only promote volunteers within your ministry.')\n                return redirect('accounts:user_list')\n            \n            target_user.role = new_role\n            target_user.assigned_ministry = ministry\n            target_user.save()\n            messages.success(request, f'{target_user.get_full_name()} promoted to Coordinator of {ministry.name}.')\n        else:\n            messages.error(request, 'You do not have permission to assign roles.')\n        \n        return redirect('accounts:user_list')\n\n\nclass AssignMinistryView(LoginRequiredMixin, UserPassesTestMixin, View):\n    def test_func(self):\n        return self.request.user.is_administrator()\n    \n    def post(self, request, pk):\n        target_user = get_object_or_404(User, pk=pk)\n        ministry_id = request.POST.get('ministry')\n        \n        if ministry_id:\n            from ministries.models import Ministry\n            ministry = get_object_or_404(Ministry, pk=ministry_id)\n            target_user.assigned_ministry = ministry\n            target_user.save()\n            messages.success(request, f'{target_user.get_full_name()} has been assigned to {ministry.name}.')\n        else:\n            target_user.assigned_ministry = None\n            target_user.save()\n            messages.success(request, f'{target_user.get_full_name()} has been removed from their ministry.')\n        \n        return redirect('accounts:user_list')\n","size_bytes":8718},"reports/admin.py":{"content":"from django.contrib import admin\n\n# Register your models here.\n","size_bytes":63},"ministries/views.py":{"content":"from django.views.generic import ListView, CreateView, UpdateView, DeleteView, DetailView\nfrom django.contrib.auth.mixins import LoginRequiredMixin, UserPassesTestMixin\nfrom django.urls import reverse_lazy\nfrom .models import Ministry, Program\nfrom .forms import MinistryForm, ProgramForm\n\nclass MinistryListView(LoginRequiredMixin, ListView):\n    model = Ministry\n    template_name = 'ministries/list.html'\n    context_object_name = 'ministries'\n    paginate_by = 20\n\nclass MinistryDetailView(LoginRequiredMixin, DetailView):\n    model = Ministry\n    template_name = 'ministries/detail.html'\n    context_object_name = 'ministry'\n\nclass MinistryCreateView(LoginRequiredMixin, UserPassesTestMixin, CreateView):\n    model = Ministry\n    form_class = MinistryForm\n    template_name = 'ministries/form.html'\n    success_url = reverse_lazy('ministries:list')\n    \n    def test_func(self):\n        return self.request.user.can_manage_volunteers()\n\nclass MinistryUpdateView(LoginRequiredMixin, UserPassesTestMixin, UpdateView):\n    model = Ministry\n    form_class = MinistryForm\n    template_name = 'ministries/form.html'\n    success_url = reverse_lazy('ministries:list')\n    \n    def test_func(self):\n        return self.request.user.can_manage_volunteers()\n\nclass MinistryDeleteView(LoginRequiredMixin, UserPassesTestMixin, DeleteView):\n    model = Ministry\n    template_name = 'ministries/confirm_delete.html'\n    success_url = reverse_lazy('ministries:list')\n    \n    def test_func(self):\n        return self.request.user.is_administrator()\n","size_bytes":1538},"attendance/__init__.py":{"content":"","size_bytes":0},"ccvms/settings.py":{"content":"\"\"\"\nDjango settings for ccvms project.\n\nGenerated by 'django-admin startproject' using Django 5.2.8.\n\nFor more information on this file, see\nhttps://docs.djangoproject.com/en/5.2/topics/settings/\n\nFor the full list of settings and their values, see\nhttps://docs.djangoproject.com/en/5.2/ref/settings/\n\"\"\"\n\nfrom pathlib import Path\n\n# Build paths inside the project like this: BASE_DIR / 'subdir'.\nBASE_DIR = Path(__file__).resolve().parent.parent\n\n\n# Quick-start development settings - unsuitable for production\n# See https://docs.djangoproject.com/en/5.2/howto/deployment/checklist/\n\n# SECURITY WARNING: keep the secret key used in production secret!\nSECRET_KEY = 'django-insecure-*+6at@7ok@@s290t1@jt2d-zl24lw*be9w6n32nqtjt1ma7t&1'\n\n# SECURITY WARNING: don't run with debug turned on in production!\nDEBUG = True\n\nALLOWED_HOSTS = ['*']\n\n# CSRF Settings for Replit\nCSRF_TRUSTED_ORIGINS = [\n    'https://*.replit.dev',\n    'https://*.repl.co',\n]\n\n# Application definition\n\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'accounts',\n    'volunteers',\n    'ministries',\n    'events',\n    'attendance',\n    'communications',\n    'reports',\n    'feedback',\n    'audit',\n]\n\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\n\nROOT_URLCONF = 'ccvms.urls'\n\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [BASE_DIR / 'templates'],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n            ],\n        },\n    },\n]\n\nWSGI_APPLICATION = 'ccvms.wsgi.application'\n\n\n# Database\n# https://docs.djangoproject.com/en/5.2/ref/settings/#databases\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': BASE_DIR / 'db.sqlite3',\n    }\n}\n\n\n# Password validation\n# https://docs.djangoproject.com/en/5.2/ref/settings/#auth-password-validators\n\nAUTH_PASSWORD_VALIDATORS = [\n    {\n        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',\n    },\n]\n\n\n# Internationalization\n# https://docs.djangoproject.com/en/5.2/topics/i18n/\n\nLANGUAGE_CODE = 'en-us'\n\nTIME_ZONE = 'UTC'\n\nUSE_I18N = True\n\nUSE_TZ = True\n\n\n# Static files (CSS, JavaScript, Images)\n# https://docs.djangoproject.com/en/5.2/howto/static-files/\n\nSTATIC_URL = 'static/'\nSTATICFILES_DIRS = [BASE_DIR / 'static']\nSTATIC_ROOT = BASE_DIR / 'staticfiles'\n\nMEDIA_URL = 'media/'\nMEDIA_ROOT = BASE_DIR / 'media'\n\n# Default primary key field type\n# https://docs.djangoproject.com/en/5.2/ref/settings/#default-auto-field\n\nDEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'\n\n# Custom User Model\nAUTH_USER_MODEL = 'accounts.User'\n\n# Login URLs\nLOGIN_URL = 'accounts:login'\nLOGIN_REDIRECT_URL = 'dashboard'\nLOGOUT_REDIRECT_URL = 'accounts:login'\n\n# Email Configuration (Console backend for development)\nEMAIL_BACKEND = 'django.core.mail.backends.console.EmailBackend'\nEMAIL_HOST = 'localhost'\nEMAIL_PORT = 1025\nEMAIL_USE_TLS = False\nDEFAULT_FROM_EMAIL = 'noreply@ccvms.local'\n","size_bytes":4034},"communications/__init__.py":{"content":"","size_bytes":0},"events/__init__.py":{"content":"","size_bytes":0},"ccvms/views.py":{"content":"from django.views.generic import TemplateView\nfrom django.contrib.auth.mixins import LoginRequiredMixin\nfrom django.utils import timezone\nfrom volunteers.models import Volunteer\nfrom ministries.models import Ministry\nfrom events.models import Event\nfrom attendance.models import Attendance\nfrom communications.models import Announcement\nfrom feedback.models import VolunteerEvaluation\n\n\nclass DashboardView(LoginRequiredMixin, TemplateView):\n    def get_template_names(self):\n        user = self.request.user\n        if user.is_administrator():\n            return ['dashboards/admin_dashboard.html']\n        elif user.is_priest():\n            return ['dashboards/priest_dashboard.html']\n        elif user.is_coordinator():\n            return ['dashboards/coordinator_dashboard.html']\n        elif user.is_volunteer_user():\n            return ['dashboards/volunteer_dashboard.html']\n        return ['dashboard.html']\n    \n    def get_context_data(self, **kwargs):\n        context = super().get_context_data(**kwargs)\n        user = self.request.user\n        \n        context['total_volunteers'] = Volunteer.objects.filter(is_active=True).count()\n        context['total_ministries'] = Ministry.objects.filter(is_active=True).count()\n        context['total_events'] = Event.objects.filter(is_active=True).count()\n        context['total_attendance'] = Attendance.objects.count()\n        \n        if user.is_volunteer_user() and hasattr(user, 'volunteer_profile'):\n            volunteer = user.volunteer_profile\n            context['my_events'] = Event.objects.filter(\n                assigned_volunteers=volunteer, \n                is_active=True,\n                start_datetime__gte=timezone.now()\n            ).order_by('start_datetime')[:5]\n            context['my_attendance'] = Attendance.objects.filter(volunteer=volunteer).count()\n            context['my_ministries'] = volunteer.ministries.filter(is_active=True)\n        \n        context['recent_communications'] = Announcement.objects.filter(is_active=True).order_by('-created_at')[:5]\n        context['upcoming_events'] = Event.objects.filter(\n            is_active=True, \n            start_datetime__gte=timezone.now()\n        ).order_by('start_datetime')[:5]\n        context['recent_feedback'] = VolunteerEvaluation.objects.order_by('-created_at')[:5]\n        \n        return context\n","size_bytes":2342},"ministries/models.py":{"content":"from django.db import models\nfrom django.conf import settings\n\nclass Ministry(models.Model):\n    name = models.CharField(max_length=200)\n    description = models.TextField()\n    leader = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.SET_NULL, null=True, blank=True, related_name='led_ministries')\n    volunteers = models.ManyToManyField('volunteers.Volunteer', related_name='ministries', blank=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n    is_active = models.BooleanField(default=True)\n    \n    class Meta:\n        verbose_name_plural = 'Ministries'\n        ordering = ['name']\n    \n    def __str__(self):\n        return self.name\n    \n    def volunteer_count(self):\n        return self.volunteers.count()\n\nclass Program(models.Model):\n    name = models.CharField(max_length=200)\n    description = models.TextField()\n    ministry = models.ForeignKey(Ministry, on_delete=models.CASCADE, related_name='programs')\n    start_date = models.DateField()\n    end_date = models.DateField(null=True, blank=True)\n    coordinator = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.SET_NULL, null=True, related_name='coordinated_programs')\n    is_active = models.BooleanField(default=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n    \n    class Meta:\n        ordering = ['-start_date']\n    \n    def __str__(self):\n        return f\"{self.name} - {self.ministry.name}\"\n","size_bytes":1419},"feedback/migrations/__init__.py":{"content":"","size_bytes":0},"communications/migrations/0001_initial.py":{"content":"# Generated by Django 5.2.8 on 2025-11-19 08:54\n\nimport django.db.models.deletion\nfrom django.conf import settings\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    initial = True\n\n    dependencies = [\n        ('ministries', '0001_initial'),\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='Announcement',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('title', models.CharField(max_length=200)),\n                ('message', models.TextField()),\n                ('priority', models.CharField(choices=[('low', 'Low'), ('normal', 'Normal'), ('high', 'High'), ('urgent', 'Urgent')], default='normal', max_length=10)),\n                ('target_roles', models.CharField(blank=True, help_text='Comma-separated roles: administrator,priest,coordinator,volunteer', max_length=200)),\n                ('is_active', models.BooleanField(default=True)),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('expires_at', models.DateTimeField(blank=True, null=True)),\n                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='announcements', to=settings.AUTH_USER_MODEL)),\n                ('target_ministries', models.ManyToManyField(blank=True, related_name='announcements', to='ministries.ministry')),\n            ],\n            options={\n                'ordering': ['-created_at'],\n            },\n        ),\n        migrations.CreateModel(\n            name='EmailLog',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('subject', models.CharField(max_length=300)),\n                ('recipients', models.TextField(help_text='Comma-separated email addresses')),\n                ('body', models.TextField()),\n                ('sent_at', models.DateTimeField(auto_now_add=True)),\n                ('success', models.BooleanField(default=True)),\n                ('error_message', models.TextField(blank=True)),\n                ('sent_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sent_emails', to=settings.AUTH_USER_MODEL)),\n            ],\n            options={\n                'ordering': ['-sent_at'],\n            },\n        ),\n    ]\n","size_bytes":2500},"reports/migrations/__init__.py":{"content":"","size_bytes":0},"communications/apps.py":{"content":"from django.apps import AppConfig\n\n\nclass CommunicationsConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'communications'\n","size_bytes":160},"attendance/urls.py":{"content":"from django.urls import path\nfrom . import views\n\napp_name = 'attendance'\n\nurlpatterns = [\n    path('', views.AttendanceListView.as_view(), name='list'),\n    path('create/', views.AttendanceCreateView.as_view(), name='create'),\n    path('<int:pk>/edit/', views.AttendanceUpdateView.as_view(), name='edit'),\n    path('<int:pk>/delete/', views.AttendanceDeleteView.as_view(), name='delete'),\n    path('bulk-mark/', views.BulkAttendanceView.as_view(), name='bulk_mark'),\n]\n","size_bytes":470},"ministries/__init__.py":{"content":"","size_bytes":0},"ministries/migrations/0001_initial.py":{"content":"# Generated by Django 5.2.8 on 2025-11-19 08:54\n\nimport django.db.models.deletion\nfrom django.conf import settings\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    initial = True\n\n    dependencies = [\n        ('volunteers', '0001_initial'),\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='Ministry',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('name', models.CharField(max_length=200)),\n                ('description', models.TextField()),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('is_active', models.BooleanField(default=True)),\n                ('leader', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='led_ministries', to=settings.AUTH_USER_MODEL)),\n                ('volunteers', models.ManyToManyField(blank=True, related_name='ministries', to='volunteers.volunteer')),\n            ],\n            options={\n                'verbose_name_plural': 'Ministries',\n                'ordering': ['name'],\n            },\n        ),\n        migrations.CreateModel(\n            name='Program',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('name', models.CharField(max_length=200)),\n                ('description', models.TextField()),\n                ('start_date', models.DateField()),\n                ('end_date', models.DateField(blank=True, null=True)),\n                ('is_active', models.BooleanField(default=True)),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('coordinator', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='coordinated_programs', to=settings.AUTH_USER_MODEL)),\n                ('ministry', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='programs', to='ministries.ministry')),\n            ],\n            options={\n                'ordering': ['-start_date'],\n            },\n        ),\n    ]\n","size_bytes":2284},"attendance/forms.py":{"content":"from django import forms\nfrom .models import Attendance\n\nclass AttendanceForm(forms.ModelForm):\n    class Meta:\n        model = Attendance\n        fields = ['event', 'volunteer', 'status', 'notes']\n        widgets = {\n            'notes': forms.Textarea(attrs={'rows': 3}),\n        }\n\nclass BulkAttendanceForm(forms.Form):\n    event = forms.ModelChoiceField(queryset=None, required=True)\n    \n    def __init__(self, *args, **kwargs):\n        from events.models import Event\n        super().__init__(*args, **kwargs)\n        self.fields['event'].queryset = Event.objects.filter(is_active=True)\n","size_bytes":593},"accounts/admin.py":{"content":"from django.contrib import admin\nfrom django.contrib.auth.admin import UserAdmin as BaseUserAdmin\nfrom .models import User\n\n@admin.register(User)\nclass UserAdmin(BaseUserAdmin):\n    list_display = ['username', 'email', 'first_name', 'last_name', 'role', 'is_staff']\n    list_filter = ['role', 'is_staff', 'is_active']\n    fieldsets = BaseUserAdmin.fieldsets + (\n        ('Custom Fields', {'fields': ('role', 'phone', 'profile_picture')}),\n    )\n","size_bytes":445},"accounts/apps.py":{"content":"from django.apps import AppConfig\n\n\nclass AccountsConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'accounts'\n","size_bytes":148},"events/apps.py":{"content":"from django.apps import AppConfig\n\n\nclass EventsConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'events'\n","size_bytes":144},"feedback/tests.py":{"content":"from django.test import TestCase\n\n# Create your tests here.\n","size_bytes":60},"communications/forms.py":{"content":"from django import forms\nfrom .models import Announcement\n\nclass AnnouncementForm(forms.ModelForm):\n    class Meta:\n        model = Announcement\n        fields = ['title', 'message', 'priority', 'target_roles', 'target_ministries', \n                  'is_active', 'expires_at']\n        widgets = {\n            'message': forms.Textarea(attrs={'rows': 6}),\n            'expires_at': forms.DateTimeInput(attrs={'type': 'datetime-local'}),\n            'target_ministries': forms.CheckboxSelectMultiple(),\n        }\n        help_texts = {\n            'target_roles': 'Enter comma-separated roles (e.g., administrator,priest,coordinator,volunteer)'\n        }\n","size_bytes":654},"accounts/tests.py":{"content":"from django.test import TestCase\n\n# Create your tests here.\n","size_bytes":60},"feedback/migrations/0001_initial.py":{"content":"# Generated by Django 5.2.8 on 2025-11-19 08:54\n\nimport django.db.models.deletion\nfrom django.conf import settings\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    initial = True\n\n    dependencies = [\n        ('events', '0001_initial'),\n        ('volunteers', '0001_initial'),\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='VolunteerEvaluation',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('rating', models.IntegerField(choices=[(1, 'Poor'), (2, 'Below Average'), (3, 'Average'), (4, 'Good'), (5, 'Excellent')])),\n                ('comments', models.TextField()),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('evaluated_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='given_evaluations', to=settings.AUTH_USER_MODEL)),\n                ('event', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='evaluations', to='events.event')),\n                ('volunteer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='evaluations', to='volunteers.volunteer')),\n            ],\n            options={\n                'ordering': ['-created_at'],\n            },\n        ),\n        migrations.CreateModel(\n            name='EventFeedback',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('feedback', models.TextField()),\n                ('suggestions', models.TextField(blank=True)),\n                ('would_participate_again', models.BooleanField(default=True)),\n                ('submitted_at', models.DateTimeField(auto_now_add=True)),\n                ('event', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='feedback', to='events.event')),\n                ('volunteer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='event_feedback', to='volunteers.volunteer')),\n            ],\n            options={\n                'ordering': ['-submitted_at'],\n                'unique_together': {('event', 'volunteer')},\n            },\n        ),\n    ]\n","size_bytes":2402},"communications/admin.py":{"content":"from django.contrib import admin\nfrom .models import Announcement, EmailLog\n\n@admin.register(Announcement)\nclass AnnouncementAdmin(admin.ModelAdmin):\n    list_display = ['title', 'priority', 'created_by', 'is_active', 'created_at', 'expires_at']\n    list_filter = ['priority', 'is_active', 'created_at']\n    search_fields = ['title', 'message']\n    filter_horizontal = ['target_ministries']\n\n@admin.register(EmailLog)\nclass EmailLogAdmin(admin.ModelAdmin):\n    list_display = ['subject', 'sent_by', 'sent_at', 'success']\n    list_filter = ['success', 'sent_at']\n    search_fields = ['subject', 'recipients']\n","size_bytes":608},"events/migrations/__init__.py":{"content":"","size_bytes":0},"attendance/tests.py":{"content":"from django.test import TestCase\n\n# Create your tests here.\n","size_bytes":60},"accounts/migrations/__init__.py":{"content":"","size_bytes":0},"feedback/forms.py":{"content":"from django import forms\nfrom .models import VolunteerEvaluation, EventFeedback\n\nclass VolunteerEvaluationForm(forms.ModelForm):\n    class Meta:\n        model = VolunteerEvaluation\n        fields = ['volunteer', 'event', 'rating', 'comments']\n        widgets = {\n            'comments': forms.Textarea(attrs={'rows': 4}),\n        }\n\nclass EventFeedbackForm(forms.ModelForm):\n    class Meta:\n        model = EventFeedback\n        fields = ['event', 'volunteer', 'feedback', 'suggestions', 'would_participate_again']\n        widgets = {\n            'feedback': forms.Textarea(attrs={'rows': 4}),\n            'suggestions': forms.Textarea(attrs={'rows': 3}),\n        }\n","size_bytes":666},"volunteers/models.py":{"content":"from django.db import models\nfrom django.conf import settings\n\nclass Volunteer(models.Model):\n    GENDER_CHOICES = (\n        ('M', 'Male'),\n        ('F', 'Female'),\n    )\n    \n    user = models.OneToOneField(settings.AUTH_USER_MODEL, on_delete=models.CASCADE, related_name='volunteer_profile')\n    gender = models.CharField(max_length=1, choices=GENDER_CHOICES)\n    age = models.PositiveIntegerField()\n    address = models.TextField(blank=True)\n    interests = models.TextField(help_text='Volunteer interests and hobbies')\n    skills = models.TextField(help_text='Special skills or talents')\n    availability = models.TextField(help_text='When the volunteer is available')\n    supporting_document = models.FileField(upload_to='volunteer_documents/', blank=True, null=True, help_text='Upload a supporting document (resume, ID, etc.)')\n    date_joined = models.DateField(auto_now_add=True)\n    is_active = models.BooleanField(default=True)\n    \n    def __str__(self):\n        return f\"{self.user.get_full_name()} - {self.user.email}\"\n    \n    class Meta:\n        ordering = ['-date_joined']\n","size_bytes":1089},"ccvms/urls.py":{"content":"from django.contrib import admin\nfrom django.urls import path, include\nfrom django.conf import settings\nfrom django.conf.urls.static import static\nfrom .views import DashboardView\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('', DashboardView.as_view(), name='dashboard'),\n    path('accounts/', include('accounts.urls')),\n    path('volunteers/', include('volunteers.urls')),\n    path('ministries/', include('ministries.urls')),\n    path('events/', include('events.urls')),\n    path('attendance/', include('attendance.urls')),\n    path('communications/', include('communications.urls')),\n    path('reports/', include('reports.urls')),\n    path('feedback/', include('feedback.urls')),\n]\n\nif settings.DEBUG:\n    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n    urlpatterns += static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)\n","size_bytes":887},"feedback/__init__.py":{"content":"","size_bytes":0},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"django==5.2.8\",\n    \"pillow>=12.0.0\",\n]\n","size_bytes":187},"main.py":{"content":"def main():\n    print(\"Hello from repl-nix-workspace!\")\n\n\nif __name__ == \"__main__\":\n    main()\n","size_bytes":96},"volunteers/migrations/0002_volunteer_supporting_document.py":{"content":"# Generated by Django 5.2.8 on 2025-11-20 07:31\n\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('volunteers', '0001_initial'),\n    ]\n\n    operations = [\n        migrations.AddField(\n            model_name='volunteer',\n            name='supporting_document',\n            field=models.FileField(blank=True, help_text='Upload a supporting document (resume, ID, etc.)', null=True, upload_to='volunteer_documents/'),\n        ),\n    ]\n","size_bytes":495},"accounts/migrations/0002_user_approval_status.py":{"content":"# Generated by Django 5.2.8 on 2025-11-20 07:31\n\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('accounts', '0001_initial'),\n    ]\n\n    operations = [\n        migrations.AddField(\n            model_name='user',\n            name='approval_status',\n            field=models.CharField(choices=[('pending', 'Pending Approval'), ('approved', 'Approved'), ('rejected', 'Rejected')], default='approved', max_length=20),\n        ),\n    ]\n","size_bytes":496},"audit/admin.py":{"content":"from django.contrib import admin\nfrom .models import AuditLog\n\n\n@admin.register(AuditLog)\nclass AuditLogAdmin(admin.ModelAdmin):\n    list_display = ['user', 'action', 'model_name', 'description', 'timestamp']\n    list_filter = ['action', 'model_name', 'timestamp']\n    search_fields = ['user__username', 'description', 'ip_address']\n    readonly_fields = ['user', 'action', 'model_name', 'object_id', 'description', 'ip_address', 'user_agent', 'timestamp']\n    \n    def has_add_permission(self, request):\n        return False\n    \n    def has_delete_permission(self, request, obj=None):\n        return request.user.is_superuser\n","size_bytes":628},"accounts/migrations/0003_user_assigned_ministry_user_is_suspended.py":{"content":"# Generated by Django 5.2.8 on 2025-11-20 11:51\n\nimport django.db.models.deletion\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('accounts', '0002_user_approval_status'),\n        ('ministries', '0001_initial'),\n    ]\n\n    operations = [\n        migrations.AddField(\n            model_name='user',\n            name='assigned_ministry',\n            field=models.ForeignKey(blank=True, help_text='Ministry assigned to Priest or Coordinator', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_staff', to='ministries.ministry'),\n        ),\n        migrations.AddField(\n            model_name='user',\n            name='is_suspended',\n            field=models.BooleanField(default=False, help_text='Suspended users cannot log in'),\n        ),\n    ]\n","size_bytes":838},"audit/migrations/__init__.py":{"content":"","size_bytes":0},"audit/migrations/0001_initial.py":{"content":"# Generated by Django 5.2.8 on 2025-11-20 11:54\n\nimport django.db.models.deletion\nfrom django.conf import settings\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    initial = True\n\n    dependencies = [\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='AuditLog',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('action', models.CharField(choices=[('create', 'Create'), ('update', 'Update'), ('delete', 'Delete'), ('login', 'Login'), ('logout', 'Logout'), ('approve', 'Approve'), ('reject', 'Reject'), ('suspend', 'Suspend'), ('assign', 'Assign'), ('other', 'Other')], max_length=20)),\n                ('model_name', models.CharField(blank=True, max_length=100)),\n                ('object_id', models.PositiveIntegerField(blank=True, null=True)),\n                ('description', models.TextField()),\n                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),\n                ('user_agent', models.CharField(blank=True, max_length=500)),\n                ('timestamp', models.DateTimeField(auto_now_add=True)),\n                ('user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audit_logs', to=settings.AUTH_USER_MODEL)),\n            ],\n            options={\n                'ordering': ['-timestamp'],\n                'indexes': [models.Index(fields=['-timestamp'], name='audit_audit_timesta_901180_idx'), models.Index(fields=['user', '-timestamp'], name='audit_audit_user_id_ea8c9f_idx'), models.Index(fields=['action', '-timestamp'], name='audit_audit_action_e33994_idx')],\n            },\n        ),\n    ]\n","size_bytes":1817},"audit/models.py":{"content":"from django.db import models\nfrom django.conf import settings\n\n\nclass AuditLog(models.Model):\n    ACTION_CHOICES = (\n        ('create', 'Create'),\n        ('update', 'Update'),\n        ('delete', 'Delete'),\n        ('login', 'Login'),\n        ('logout', 'Logout'),\n        ('approve', 'Approve'),\n        ('reject', 'Reject'),\n        ('suspend', 'Suspend'),\n        ('assign', 'Assign'),\n        ('other', 'Other'),\n    )\n    \n    user = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.SET_NULL, null=True, related_name='audit_logs')\n    action = models.CharField(max_length=20, choices=ACTION_CHOICES)\n    model_name = models.CharField(max_length=100, blank=True)\n    object_id = models.PositiveIntegerField(null=True, blank=True)\n    description = models.TextField()\n    ip_address = models.GenericIPAddressField(null=True, blank=True)\n    user_agent = models.CharField(max_length=500, blank=True)\n    timestamp = models.DateTimeField(auto_now_add=True)\n    \n    class Meta:\n        ordering = ['-timestamp']\n        indexes = [\n            models.Index(fields=['-timestamp']),\n            models.Index(fields=['user', '-timestamp']),\n            models.Index(fields=['action', '-timestamp']),\n        ]\n    \n    def __str__(self):\n        return f\"{self.user} - {self.get_action_display()} - {self.timestamp}\"\n","size_bytes":1327},"audit/apps.py":{"content":"from django.apps import AppConfig\n\n\nclass AuditConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'audit'\n","size_bytes":142},"audit/__init__.py":{"content":"","size_bytes":0},".local/state/replit/agent/progress_tracker.md":{"content":"[x] 1. Install the required packages (Django, Pillow)\n[x] 2. Restart the workflow to see if the project is working\n[x] 3. Verify the project is working using the feedback tool\n[x] 4. Implement three new features requested by user:\n    - Add supporting document field to volunteer signup ✅\n    - Implement pending approval system for volunteers ✅\n    - Create role-based menu and functionality ✅\n[x] 5. Project import completed and all requested features implemented successfully\n[x] 6. Implement ministry assignment feature (Nov 23, 2025):\n    - Add ministry assignment UI in user management page ✅\n    - Create AssignMinistryView for administrators ✅\n[x] 7. Implement priest-only event creation (Nov 23, 2025):\n    - Restrict event creation to priests only (not admins) ✅\n    - Auto-assign priest's ministry to events ✅\n    - Filter volunteers and coordinators by priest's ministry ✅","size_bytes":900},"events/migrations/0002_eventreport_task.py":{"content":"# Generated by Django 5.2.8 on 2025-11-23 11:49\n\nimport django.db.models.deletion\nfrom django.conf import settings\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('events', '0001_initial'),\n        ('volunteers', '0002_volunteer_supporting_document'),\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='EventReport',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('title', models.CharField(max_length=200)),\n                ('summary', models.TextField(help_text='Brief summary of the event')),\n                ('attendance_count', models.PositiveIntegerField(help_text='Number of attendees')),\n                ('volunteer_performance', models.TextField(help_text='Notes on volunteer performance')),\n                ('challenges', models.TextField(blank=True, help_text='Challenges encountered during the event')),\n                ('recommendations', models.TextField(blank=True, help_text='Recommendations for future events')),\n                ('status', models.CharField(choices=[('draft', 'Draft'), ('submitted', 'Submitted'), ('reviewed', 'Reviewed')], default='draft', max_length=20)),\n                ('submitted_at', models.DateTimeField(blank=True, null=True)),\n                ('reviewed_at', models.DateTimeField(blank=True, null=True)),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('updated_at', models.DateTimeField(auto_now=True)),\n                ('event', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reports', to='events.event')),\n                ('reviewed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reviewed_reports', to=settings.AUTH_USER_MODEL)),\n                ('submitted_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='submitted_reports', to=settings.AUTH_USER_MODEL)),\n            ],\n            options={\n                'ordering': ['-created_at'],\n            },\n        ),\n        migrations.CreateModel(\n            name='Task',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('title', models.CharField(max_length=200)),\n                ('description', models.TextField()),\n                ('status', models.CharField(choices=[('pending', 'Pending'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='pending', max_length=20)),\n                ('due_date', models.DateField(blank=True, null=True)),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('updated_at', models.DateTimeField(auto_now=True)),\n                ('assigned_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='tasks_assigned', to=settings.AUTH_USER_MODEL)),\n                ('assigned_to', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='assigned_tasks', to='volunteers.volunteer')),\n                ('event', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tasks', to='events.event')),\n            ],\n            options={\n                'ordering': ['-created_at'],\n            },\n        ),\n    ]\n","size_bytes":3537}},"version":2}